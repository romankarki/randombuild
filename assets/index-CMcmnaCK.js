import{d as I,r,j as e,M as S,U as b}from"./index-BRiPDprX.js";import{h,a as M}from"./apiClient-BdZFA0eS.js";import{b as m}from"./Constants-C3A6Gqx3.js";import{T as u}from"./TextField-B9RgCfUw.js";import{S as P}from"./Select-B1tC3DLq.js";import{M as d}from"./MenuItem-B0v1FVPj.js";import{B as D}from"./Button-CgWm9gs8.js";import"./InputLabel-BGqQE_mf.js";const W=()=>{const p=I(),[i,x]=r.useState(""),[a,c]=r.useState(""),[l,f]=r.useState(0),[o,g]=r.useState([]);r.useState([]);const j=async()=>{if(!v())return;let s={title:i,description:a,companyId:l};const T=m+"/Branch/save-branch";await h(T,s),p(-1)},v=()=>{let t=[];l||t.push("Company is mandatory"),i==""&&t.push("Title Name is mandatory"),a==""&&t.push("Description is mandatory");let s=t.join(`
`);return t.length>0?(alert(s),!1):!0},y=async()=>{const t=m+"/Company/get-companies/",s=await M(t);g(s)};r.useEffect(()=>{y()},[]);const C={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},n=JSON.parse(sessionStorage.getItem("user"));return e.jsxs(S,{title:"Creating new Branch",children:[e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx("span",{children:"Branch Name"}),e.jsx(u,{id:"outlined-basic",value:i,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var s;return x((s=t==null?void 0:t.target)==null?void 0:s.value)}})]}),e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx("span",{children:"Branch Description"}),e.jsx(u,{id:"outlined-basic",variant:"outlined",value:a,autoComplete:"off",fullWidth:!0,onChange:t=>{var s;return c((s=t==null?void 0:t.target)==null?void 0:s.value)}})]}),e.jsx("div",{style:{marginTop:"0rem"},children:e.jsx(b,{sx:{m:0,minWidth:120},size:"small",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),e.jsxs(P,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(l),width:"300px",placeholder:"Choose your Company",MenuProps:C,onChange:t=>{var s;f(Number((s=t==null?void 0:t.target)==null?void 0:s.value))},children:[e.jsx(d,{value:"",children:e.jsx("em",{children:"None"})}),o==null?void 0:o.map(t=>(n==null?void 0:n.role)==="superadmin"?e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):(t==null?void 0:t.id)===(n==null?void 0:n.companyId)?e.jsx(d,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):null)]})]})})}),e.jsx("div",{style:{marginTop:"0.9rem"},children:e.jsx(D,{variant:"contained",onClick:()=>j(),children:"Save Changes"})})]})};export{W as default};
