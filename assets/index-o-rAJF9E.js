import{d as _,Z as k,r as a,j as t,M as G,W as T}from"./index-BAwjm5YK.js";import{h as S,a as y}from"./apiClient-OPmdi5JO.js";import{b as n}from"./Constants-Ctlr_h4s.js";import{T as H}from"./TextField-DNL3OJfk.js";import{S as b}from"./Select-CzHIg533.js";import{M as c}from"./MenuItem-Bn-UT2-s.js";import{B as E}from"./Button-AuduvB-A.js";import"./InputLabel-CqTv-JMh.js";const U=()=>{const v=_();let{id:i,compid:x}=k();a.useState(!1);const[l,f]=a.useState(""),[o,h]=a.useState(0),[u,w]=a.useState([]),[d,g]=a.useState(null),[p,B]=a.useState([]),D=async()=>{if(!j())return;let s={id:i,title:l,branchId:d,companyId:o};const r=n+"/KioskService/save-company-service";await S(r,s),v(-1)},M=async()=>{if(!j())return;let s={id:i,title:l,branchId:d,companyId:o,isDeleted:!0};var r=confirm("are you sure you want to permanently delete this record");if(!r)return;const m=n+"/KioskService/save-company-service";await S(m,s),v(-1)},j=()=>{let e=[];o||e.push("Company is mandatory"),d||e.push("Branch is mandatory"),l==""&&e.push("Title Type is required");let s=e.join(`
`);return e.length>0?(alert(s),!1):!0},P=async()=>{const e=n+"/Company/get-companies/",s=await y(e);w(s)},C=async e=>{const s=n+"/Branch/get-all-branches-for-company/"+e;let r=await y(s);B(r)};a.useEffect(()=>{P()},[]);const N=async()=>{await C(x);const e=n+"/KioskService/get-company-service/"+i;let s=await y(e);g(s.branchId),h(s.companyId),f(s.title)};a.useEffect(()=>{N()},[i,x]);const I={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return t.jsxs(G,{title:"Creating new Employee",children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Service Title"}),t.jsx(H,{id:"outlined-basic",value:l,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return f((s=e==null?void 0:e.target)==null?void 0:s.value)}})]}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(T,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),t.jsxs(b,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(o),width:"300px",placeholder:"Choose your Company",MenuProps:I,onChange:e=>{var s,r,m;h(Number((s=e==null?void 0:e.target)==null?void 0:s.value)),C((r=e==null?void 0:e.target)==null?void 0:r.value),fetchEmployees((m=e==null?void 0:e.target)==null?void 0:m.value)},children:[t.jsx(c,{value:"",children:t.jsx("em",{children:"None"})}),u==null?void 0:u.map(e=>t.jsx(c,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(T,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Branch"}),t.jsxs(b,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(d),width:"300px",placeholder:"Choose your Company",MenuProps:I,onChange:e=>{var s;g((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(c,{value:"",children:t.jsx("em",{children:"None"})}),p==null?void 0:p.map(e=>t.jsx(c,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),t.jsx("br",{}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx(E,{variant:"contained",onClick:()=>D(),children:"Save Changes"}),t.jsx(E,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{M()},children:"Delete"})]})]})};export{U as default};
