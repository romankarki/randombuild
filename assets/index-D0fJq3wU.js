import{d as U,Z,r as n,j as t,M as K,F as Q}from"./index-DRQ6_V5g.js";import{h as A,a as V}from"./apiClient-BdZFA0eS.js";import{b as f}from"./Constants-CKiQFZHc.js";import{d as q}from"./dayjs.min-VAbvJNDE.js";import{L as w,A as W,D as _}from"./DateTimePicker-Bfw4Bl1D.js";import{T as s}from"./TextField-BJxCmcBS.js";import{S as X}from"./Select-DzrpZOsU.js";import{M as h}from"./MenuItem-CAejK8zD.js";import{B as G}from"./Button-DqR8CO8c.js";import"./DialogContent-Bzmpr93m.js";import"./InputLabel-BfdBC-nT.js";const pe=()=>{const j=U();let{id:o,compid:H}=Z();const[L,Y]=n.useState(!1),[i,y]=n.useState(0),[d,D]=n.useState(""),[l,N]=n.useState(q()),[u,P]=n.useState(q()),[m,b]=n.useState(""),[p,T]=n.useState(""),[c,I]=n.useState(""),[C,S]=n.useState(""),[g,E]=n.useState(""),[x,k]=n.useState([]),F=async()=>{if(!M())return;let a={Id:o,TopicName:d,Venue:m,StartDate:l,EndDate:u,CoordinatorName:p,CoordinatorPhoneNumber:c,AssistantCoordinatorName:C,AssistantCoordinatorPhoneNumber:g,CompanyId:i,IsDeleted:L};const v=f+"/Meetings/save-company-meeting-info";await A(v,a),j(-1)},O=async()=>{if(!M())return;let a={Id:o,TopicName:d,Venue:m,StartDate:l,EndDate:u,CoordinatorName:p,CoordinatorPhoneNumber:c,AssistantCoordinatorName:C,AssistantCoordinatorPhoneNumber:g,CompanyId:i,IsDeleted:!0};var v=confirm("are you sure you want to permanently delete this record");if(!v)return;const J=f+"/Meetings/save-company-meeting-info";await A(J,a),j(-1)},M=()=>{let e=[];d==""&&e.push("Name of Topic is required"),l==""&&e.push("Start Date is required"),u==""&&e.push("End Date is required"),m==""&&e.push("Venue is required"),p==""&&e.push("Coordinator Name is required"),c==""&&e.push("Coordinator Phone Number is required"),i==""&&e.push("Company is required");let a=e.join(`
`);return e.length>0?(alert(a),!1):!0},R=async()=>{const e=f+"/Company/get-companies/",a=await V(e);k(a)};n.useEffect(()=>{R()},[]);const z=async()=>{const e=f+"/Meetings/get-meeting/"+o;let a=await V(e);D(a.topicName),y(a.companyId),N(a.startDate),P(a.endDate),b(a.venue),T(a.coordinatorName),I(a.coordinatorPhoneNumber),S(a.assistantCoordinatorName),E(a.assistantCoordinatorPhoneNumber)};n.useEffect(()=>{z()},[o,H]);const B={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},r=JSON.parse(sessionStorage.getItem("user"));return t.jsxs(K,{title:"Editing Meetings",children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Name of Title"}),t.jsx(s,{id:"outlined-basic",value:d,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return D((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem",display:"flex",gap:"1rem"},children:[t.jsx(w,{dateAdapter:W,children:t.jsx(_,{renderInput:e=>t.jsx(s,{...e}),label:"Start Date",value:l,onChange:e=>{N(e)}})}),t.jsx(w,{dateAdapter:W,children:t.jsx(_,{renderInput:e=>t.jsx(s,{...e}),label:"End Date",value:u,onChange:e=>{P(e)}})})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Venue"}),t.jsx(s,{id:"outlined-basic",value:m,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return b((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Coordinator Name"}),t.jsx(s,{id:"outlined-basic",value:p,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return T((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Coordinator Phonenumber"}),t.jsx(s,{id:"outlined-basic",variant:"outlined",value:c,autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return I((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Assistant Coordinator Name"}),t.jsx(s,{id:"outlined-basic",value:C,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return S((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Assistant Coordinator Phonenumber"}),t.jsx(s,{id:"outlined-basic",variant:"outlined",value:g,autoComplete:"off",fullWidth:!0,onChange:e=>{var a;return E((a=e==null?void 0:e.target)==null?void 0:a.value)}})]}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(Q,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),t.jsxs(X,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(i),width:"300px",placeholder:"Choose your Company",MenuProps:B,onChange:e=>{var a;y(Number((a=e==null?void 0:e.target)==null?void 0:a.value))},children:[t.jsx(h,{value:"",children:t.jsx("em",{children:"None"})}),x==null?void 0:x.map(e=>(r==null?void 0:r.role)==="superadmin"?t.jsx(h,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(r==null?void 0:r.companyId)?t.jsx(h,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),t.jsx("br",{}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx(G,{variant:"contained",onClick:()=>F(),children:"Save Changes"}),t.jsx(G,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{O()},children:"Delete"})]})]})};export{pe as default};
