import{d as ae,Z as ie,r as l,j as n,M as re,F as g}from"./index-DRQ6_V5g.js";import{b as Z,a as x}from"./apiClient-BdZFA0eS.js";import{a as oe,b as d}from"./Constants-CKiQFZHc.js";import{T as r}from"./TextField-BJxCmcBS.js";import{S as de}from"./Switch-BZZrRvO0.js";import{S as h}from"./Select-DzrpZOsU.js";import{M as a}from"./MenuItem-CAejK8zD.js";import{B as q}from"./Button-DqR8CO8c.js";import"./InputLabel-BfdBC-nT.js";import"./SwitchBase-UwyU8-RP.js";const Ie=()=>{const N=ae();let{id:m}=ie();const[K,me]=l.useState(!1),[p,M]=l.useState(""),[v,W]=l.useState(""),[u,B]=l.useState(0),[j,A]=l.useState(0),[f,G]=l.useState(0),[C,L]=l.useState("male"),[R,Q]=l.useState(null),[y,F]=l.useState(""),[E,_]=l.useState(""),[I,b]=l.useState(""),[T,H]=l.useState(0),[U,k]=l.useState(""),[S,z]=l.useState(!0),[P,X]=l.useState([]),[w,Y]=l.useState([]),$=async()=>{if(!V())return;let t=new FormData;if(t.append("Id",m),t.append("CompanyId",u),t.append("EmployeeName",p),t.append("EmployeeType",v),t.append("Level",j),t.append("Priority",f),t.append("Gender",C),t.append("Photo",R),t.append("Phonenumber",y),t.append("Email",E),t.append("Designation",I),t.append("BranchId",T),t.append("IsActive",S),K){t.append("IsDeleted",!0);var s=confirm("are you sure you want to permanently delete this record");if(!s)return}const i=d+"/Employee/save-employee-record";await Z(i,t),N(-1)},ee=async()=>{if(!V())return;let t=new FormData;t.append("Id",m),t.append("CompanyId",u),t.append("EmployeeName",p),t.append("EmployeeType",v),t.append("Level",j),t.append("Priority",f),t.append("Gender",C),t.append("Photo",R),t.append("Phonenumber",y),t.append("Email",E),t.append("Designation",I),t.append("BranchId",T),t.append("IsActive",S),t.append("IsDeleted",!0);var s=confirm("are you sure you want to permanently delete this record");if(!s)return;const i=d+"/Employee/save-employee-record";await Z(i,t),N(-1)},V=()=>{let e=[];u||e.push("Company is mandatory"),p==""&&e.push("Employee Name is mandatory"),y==""&&e.push("Phonenumber is mandatory");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},te=async()=>{const e=d+"/Company/get-companies/",t=await x(e);X(t)},O=async e=>{const t=d+"/Branch/get-all-branches-for-company/"+e;let s=await x(t);Y(s)},[D,ne]=l.useState([]),J=async e=>{const t=d+"/Employee/get-all-company-employee-category/"+e,s=await x(t);ne(s)};l.useEffect(()=>{te()},[]);const le=async()=>{const e=d+"/Employee/get-employee-by-id/"+m;let t=await x(e);console.log("all the results are here",t),M(t.employeeName),b(t.designation),F(t.phonenumber),_(t.email),b(t.designation),L(t.gender),B(t.companyId),await O(t.companyId),await J(t.companyId),H(t.branchId),G(t.proirity),A(Number(t.level)),W(t.employeeType),z(t.isActive),setTimeout(()=>{let s=t.photo.split("/"),i=oe+t.companyId+"/"+s.pop();k(i)},500)};l.useEffect(()=>{le()},[m]);const c={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},o=JSON.parse(sessionStorage.getItem("user")),se=e=>{z(e.target.checked)};return n.jsxs(re,{title:"Creating new Employee",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Name"}),n.jsx(r,{id:"outlined-basic",value:p,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return M((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Is Active? "}),n.jsx(de,{checked:S,onChange:se,inputProps:{"aria-label":"controlled"}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Level"}),n.jsx(r,{id:"outlined-basic",value:j,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return A((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Priority"}),n.jsx(r,{id:"outlined-basic",value:f,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return G((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Photo"}),n.jsx("div",{children:U&&n.jsx("img",{src:U,alt:"employeeimage",width:"300",height:"200"})}),n.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;Q((t=e==null?void 0:e.target)==null?void 0:t.files[0]),k(null)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Designation"}),n.jsx(r,{id:"outlined-basic",variant:"outlined",value:I,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return b((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Email"}),n.jsx(r,{id:"outlined-basic",variant:"outlined",value:E,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return _((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Phonenumber"}),n.jsx(r,{id:"outlined-basic",variant:"outlined",value:y,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return F((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Gender"}),n.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:C,width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return L((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(a,{value:"male",children:"Male"}),n.jsx(a,{value:"female",children:"Female"})]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Company"}),n.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(u),width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t,s,i;B(Number((t=e==null?void 0:e.target)==null?void 0:t.value)),O((s=e==null?void 0:e.target)==null?void 0:s.value),J((i=e==null?void 0:e.target)==null?void 0:i.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),P==null?void 0:P.map(e=>(o==null?void 0:o.role)==="superadmin"?n.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(o==null?void 0:o.companyId)?n.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),n.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(T),width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return H((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),w==null?void 0:w.map(e=>n.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Category"}),n.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:v,width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return W((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),D==null?void 0:D.map(e=>n.jsx(a,{value:e==null?void 0:e.title,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(q,{variant:"contained",onClick:()=>$(),children:"Save Changes"}),n.jsx(q,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{ee()},children:"Delete"})]})]})};export{Ie as default};
