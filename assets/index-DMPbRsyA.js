import{d as K,a1 as X,r as s,j as n,M as Y,U as R}from"./index-Bz6Q7mkc.js";import{b as Z,h as $,a as U}from"./apiClient-FbcIhW2M.js";import{N as g,b as c}from"./Constants-D_b9nDxE.js";import{R as ee}from"./index-CJO7IKie.js";import{T as _}from"./TextField-CqcfMrm6.js";import{S as A}from"./Select-CisjQ6sL.js";import{M as l}from"./MenuItem-DWTedjKg.js";import{B as G}from"./Button-CDpLXtAP.js";import"./InputLabel-DAB9vEt8.js";const me=()=>{const x=K(),{id:r}=X(),[p,H]=s.useState([]),[u,f]=s.useState(""),[j,y]=s.useState(0),[v,d]=s.useState("image"),[W,B]=s.useState(null),[z,m]=s.useState(""),[C,T]=s.useState(""),[O,I]=s.useState(".jpg,.jpeg,.png"),Q=async()=>{let e=new FormData;e.append("id",r),e.append("text",u),e.append("fileType",v),e.append("companyId",j),e.append("file",W),e.append("description",C);const t=c+"/NewsAndNotice/save-news-notice";await Z(t,e),x(-1)},V=async()=>{var e=confirm("are you sure you want to permanently delete this record");if(!e)return;const t=c+"/NewsAndNotice/delete-news-notice/"+r;await $(t,{}),x(-1)},q=async()=>{const e=c+"/Company/get-companies/",t=await U(e);H(t)},J=async()=>{var i,N,b,S,D,P,k,E,F,L,M;const e=c+"/NewsAndNotice/get-news-notice/"+r,t=await U(e);if(f(t.text),T(t.description),y(t.companyId),((i=t==null?void 0:t.docLink)==null?void 0:i.length)>1){const a=(S=(b=(N=t==null?void 0:t.docLink)==null?void 0:N.split("/"))==null?void 0:b.pop())==null?void 0:S.toString(),o=g+(t==null?void 0:t.companyId)+"/"+a;m(o),d("pdf"),h("pdf")}else if(((D=t==null?void 0:t.imageLink)==null?void 0:D.length)>1){const a=(E=(k=(P=t==null?void 0:t.imageLink)==null?void 0:P.split("/"))==null?void 0:k.pop())==null?void 0:E.toString(),o=g+(t==null?void 0:t.companyId)+"/"+a;m(o),d("image"),h("image")}else{const a=(M=(L=(F=t==null?void 0:t.videoLink)==null?void 0:F.split("/"))==null?void 0:L.pop())==null?void 0:M.toString(),o=g+(t==null?void 0:t.companyId)+"/"+a;m(o),d("video")}};s.useEffect(()=>{q()},[]),s.useEffect(()=>{J()},[r]);const w={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},h=e=>{e=="image"?I(".jpg,.jpeg,.png"):I(".pdf,.doc,.docx")};return n.jsxs(Y,{title:"Add Record To News & Notice",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Title"}),n.jsx(_,{id:"outlined-basic",value:u,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return f((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Description"}),n.jsx(ee,{style:{height:"150px"},value:C,onChange:T}),n.jsx("br",{}),n.jsx("br",{})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Choose File "}),n.jsx("span",{style:{width:"2rem"},children:"      "}),n.jsx("a",{href:z,target:"_blank",children:"Uploaded File"}),n.jsx(_,{inputProps:{accept:O},id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return B((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(R,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Content"}),n.jsxs(A,{labelId:"demo-select-small-label",id:"demo-select-small",value:v,width:"300px",placeholder:"Choose your Content",MenuProps:w,onChange:e=>{var t,i;d((t=e==null?void 0:e.target)==null?void 0:t.value),h((i=e==null?void 0:e.target)==null?void 0:i.value)},children:[n.jsx(l,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(l,{value:"image",children:"Image"}),n.jsx(l,{value:"pdf",children:"PDF"})]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(R,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),n.jsxs(A,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(j),width:"300px",placeholder:"Choose your Company",MenuProps:w,onChange:e=>{var t,i;y(Number((t=e==null?void 0:e.target)==null?void 0:t.value)),fetchBranch((i=e==null?void 0:e.target)==null?void 0:i.value)},children:[n.jsx(l,{value:"",children:n.jsx("em",{children:"None"})}),p==null?void 0:p.map(e=>n.jsx(l,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(G,{variant:"contained",onClick:()=>Q(),children:"Save Changes"}),n.jsx(G,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{V()},children:"Delete"})]})]})};export{me as default};
