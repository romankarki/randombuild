import{r as d,d as T,j as a,e as I,R as w,M as k}from"./index-Bz6Q7mkc.js";import"./EmployeeTable-Bpw4oB7W.js";import{b as B}from"./Constants-D_b9nDxE.js";import{R as S,G as E,A}from"./GetValuesFromLocalStorage-DmvbEdkW.js";import{T as L,a as N,e as W,c as v,d as C,b as G}from"./TableRow-D_fEnAwa.js";import{T as O}from"./TablePagination-Ba4HJYAm.js";import{B as U}from"./Button-CDpLXtAP.js";import{T as H}from"./TextField-CqcfMrm6.js";import"./Select-CisjQ6sL.js";import"./MenuItem-DWTedjKg.js";import"./InputLabel-DAB9vEt8.js";const P=[{id:"id",label:"Id",minWidth:170},{id:"title",label:"Branch Name",minWidth:100},{id:"description",label:"Description",minWidth:170,align:"right"},{id:"companyName",label:"Company Name",minWidth:170,align:"right"},{id:"action",label:"Action",minWidth:170,align:"center"}],z=({companyid:s})=>{const[h,p]=d.useState(0),[i,g]=d.useState(10),[m,f]=d.useState([]);async function u(){console.log("this is companyid",s);const e=sessionStorage.getItem("user")||{},t=JSON.parse(e),o=(t==null?void 0:t.token)||"",c=B+"/Branch/get-all-branches-for-company/"+s,l=await fetch(c,{method:"GET",headers:{Authorization:"Bearer "+o}});l.ok||alert("someting went wrong");const r=await l.json();f(r)}d.useEffect(()=>{u()},[s]);const b=(e,t)=>{p(t)},x=e=>{g(+e.target.value),p(0)},j=T(),n=(e,t)=>{console.log("currently selected item is ....",e),j("/edit/branches/"+e.id+"/"+s)};return a.jsxs(I,{sx:{width:"100%",overflow:"hidden"},children:[a.jsx(L,{sx:{maxHeight:440},children:a.jsxs(N,{stickyHeader:!0,"aria-label":"sticky table",children:[a.jsx(W,{children:a.jsx(v,{children:P.map(e=>a.jsx(C,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id))})}),a.jsx(G,{children:m.slice(h*i,h*i+i).map(e=>a.jsx(v,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(t=>{if(t.id=="action")return a.jsx(C,{align:t.align,children:a.jsx(S,{onClick:()=>n(e)})},t.id);const o=e[t.id];return a.jsx(C,{align:t.align,children:t.format&&typeof o=="number"?t.format(o):o},t.id)})},e.id))})]})}),a.jsx(O,{rowsPerPageOptions:[10,25,100],component:"div",count:m.length,rowsPerPage:i,page:h,onPageChange:b,onRowsPerPageChange:x})]})},J=z;function _(){const[s,h]=w.useState([]),[p,i]=d.useState(""),[g,m]=d.useState(1),f=(n,e)=>{i(e);let t=s==null?void 0:s.filter(o=>o.name==e)[0];t&&m(t.id)};async function u(){const n=sessionStorage.getItem("user")||{},e=JSON.parse(n),t=(e==null?void 0:e.token)||"",o=B+"/Company/get-companies",y=await fetch(o,{method:"GET",headers:{Authorization:"Bearer "+t}});y.ok||alert("someting went wrong");const c=await y.json();h(c);let l=c==null?void 0:c.filter(R=>R.Id==e.companyId),r=l==null?void 0:l.pop();r&&(i(r.name),m(r==null?void 0:r.id))}w.useEffect(()=>{u()},[]);const b=T(),x=()=>{b("/add/branches")},j=E();return a.jsxs(k,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[a.jsx(U,{onClick:x,variant:"contained",disableElevation:!0,children:"Add New"}),j.toLowerCase()==="superadmin"?a.jsx(A,{inputValue:p,onInputChange:(n,e)=>f(n,e),sx:{width:"400px"},id:"disable-close-on-select",options:s.map(n=>n.name),getOptionLabel:n=>n,renderInput:n=>a.jsx(H,{...n,variant:"standard"})}):null]}),a.jsx(J,{companyid:g})]})}export{_ as default};
