import{d as W,a1 as O,r as n,j as t,M as k,U as v}from"./index-BRiPDprX.js";import{h as B,a as g}from"./apiClient-BdZFA0eS.js";import{b as a}from"./Constants-C3A6Gqx3.js";import{S as j}from"./Select-B1tC3DLq.js";import{M as r}from"./MenuItem-B0v1FVPj.js";import{B as P}from"./Button-CgWm9gs8.js";const X=()=>{const I=W();let{id:o,compid:d}=O();n.useState(!1);const[m,b]=n.useState(d),[p,T]=n.useState(0),[u,E]=n.useState(""),[f,D]=n.useState([]),[c,S]=n.useState(null),[h,M]=n.useState([]),[C,R]=n.useState([]),_=async()=>{if(!w())return;let s={id:o,grievannceType:u,branchId:c,companyId:m,employeeId:p};const l=a+"/Grievance/save-company-grivance-info";await B(l,s),I(-1)},H=async()=>{if(!w())return;let s={id:o,grievannceType:u,branchId:c,companyId:m,employeeId:p,isDeleted:!0};var l=confirm("are you sure you want to permanently delete this record");if(!l)return;const x=a+"/Grievance/save-company-grivance-info";await B(x,s),I(-1)},w=()=>{let e=[];m||e.push("Company is mandatory"),c||e.push("Branch is mandatory"),p||e.push("Employee is mandatory"),u==""&&e.push("Grievance Type is required");let s=e.join(`
`);return e.length>0?(alert(s),!1):!0},z=async()=>{const e=a+"/Company/get-companies/",s=await g(e);D(s)},G=async e=>{const s=a+"/Branch/get-all-branches-for-company/"+e;let l=await g(s);M(l)},N=async e=>{const s=a+"/Employee/get-all-company-employees/"+e;let l=await g(s);R(l)};n.useEffect(()=>{z()},[]);const V=async()=>{await G(d),await N(d);const e=a+"/Grievance/get-grievance/"+o;let s=await g(e);console.log("this is employee id",s.employeeId),S(s.branchId),b(s.companyId),T(s.employeeId),E(s.grievanceType)};n.useEffect(()=>{V()},[o,d]);const y={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},i=JSON.parse(sessionStorage.getItem("user"));return t.jsxs(k,{title:"Creating new Employee",children:[t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(v,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(m),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s,l,x;b(Number((s=e==null?void 0:e.target)==null?void 0:s.value)),G((l=e==null?void 0:e.target)==null?void 0:l.value),N((x=e==null?void 0:e.target)==null?void 0:x.value)},children:[t.jsx(r,{value:"",children:t.jsx("em",{children:"None"})}),f==null?void 0:f.map(e=>(i==null?void 0:i.role)==="superadmin"?t.jsx(r,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(i==null?void 0:i.companyId)?t.jsx(r,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(v,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(c),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;S((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(r,{value:"",children:t.jsx("em",{children:"None"})}),h==null?void 0:h.map(e=>t.jsx(r,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(v,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Select Employee"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(p),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;T((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(r,{value:"",children:t.jsx("em",{children:"None"})}),C==null?void 0:C.map(e=>t.jsx(r,{value:e==null?void 0:e.id,children:e==null?void 0:e.employeeName},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(v,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Select Grievance Type"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:u,width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;E((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(r,{value:"",children:t.jsx("em",{children:"None"})}),t.jsx(r,{value:"greivance",children:"Grievance"}),t.jsx(r,{value:"responsible",children:"Responsible"})]})]})})}),t.jsx("br",{}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx(P,{variant:"contained",onClick:()=>_(),children:"Save Changes"}),t.jsx(P,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{H()},children:"Delete"})]})]})};export{X as default};
