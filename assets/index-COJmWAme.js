import{R as r,d as I,j as a,e as k,r as T,M as W}from"./index-BTRZstNR.js";import{b as P}from"./Constants-BUFMHqTz.js";import{a as E}from"./apiClient-BLOXFteY.js";import{T as N,a as w,e as B,c as C,d as g,b as D}from"./TableRow-DHztHEt9.js";import{T as A}from"./Tooltip-CW-tWSwq.js";import{R as G,G as L,A as H}from"./GetValuesFromLocalStorage-l7k9KXLU.js";import{T as O}from"./TablePagination-CJIzdBVi.js";import{B as U}from"./Button-CrGA_dfM.js";import{T as M}from"./TextField-GCBK3T6O.js";import"./Select-Xs8P-wOv.js";import"./MenuItem-BkcVvT_A.js";import"./InputLabel-XzrnmkSq.js";const y=[{id:"id",label:"Id",minWidth:170},{id:"serviceId",label:"Service ID",minWidth:160},{id:"title",label:"Service Title",minWidth:100},{id:"isTTSContent",label:"Is Text To Speech",minWidth:100},{id:"companyName",label:"Company Name",minWidth:100},{id:"branchName",label:"Branch Name",minWidth:160},{id:"action",label:"Action",minWidth:170,align:"center"}],z=({companyId:s})=>{const[l,c]=r.useState(0),[o,h]=r.useState(10),[d,f]=r.useState([]),u=I();async function x(){const e=P+"/KioskServiceDetail/get-service-detail/"+s,t=await E(e);f(t)}r.useEffect(()=>{x()},[s]);const v=(e,t)=>{c(t)},b=e=>{h(+e.target.value),c(0)},i=(e,t)=>{console.log("this is current row",e),u("/edit/servicedetail/"+(e==null?void 0:e.id)+"/"+(e==null?void 0:e.companyId))};return a.jsxs(k,{sx:{width:"100%",overflow:"hidden"},children:[a.jsx(N,{sx:{maxHeight:440},children:a.jsxs(w,{stickyHeader:!0,"aria-label":"sticky table",children:[a.jsx(B,{children:a.jsx(C,{children:y.map(e=>a.jsx(g,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id))})}),a.jsx(D,{children:d.slice(l*o,l*o+o).map(e=>a.jsx(C,{hover:!0,role:"checkbox",tabIndex:-1,children:y.map(t=>{const n=e[t.id];return t.id=="action"?a.jsx(g,{align:t.align,children:a.jsx(A,{title:"Edit Information",arrow:!0,children:a.jsx(G,{onClick:()=>i(e)})})},t.id):t.id==="isTTSContent"?a.jsx(g,{align:t.align,children:n==!0||n=="true"?"Yes":"No"},t.id):a.jsx(g,{align:t.align,children:t.format&&typeof n=="number"?t.format(n):n},t.id)})},e.id))})]})}),a.jsx(O,{rowsPerPageOptions:[10,25,100],component:"div",count:d.length,rowsPerPage:o,page:l,onPageChange:v,onRowsPerPageChange:b})]})},F=z;function ae(){const[s,l]=r.useState([]),[c,o]=T.useState(""),[h,d]=T.useState(1),f=(i,e)=>{o(e);let t=s==null?void 0:s.filter(n=>n.name==e)[0];t&&d(t.id)};async function u(){const i=sessionStorage.getItem("user")||{},e=JSON.parse(i),t=(e==null?void 0:e.token)||"",n=P+"/Company/get-companies",S=await fetch(n,{method:"GET",headers:{Authorization:"Bearer "+t}});S.ok||alert("someting went wrong");const p=await S.json();l(p);let j=p==null?void 0:p.filter(R=>R.id==e.companyId),m=(j==null?void 0:j.pop())||null;m&&(o(m.name),d(m==null?void 0:m.id))}r.useEffect(()=>{u()},[]);const x=L();T.useEffect(()=>{},[c]);const v=I(),b=()=>{v("/add/servicedetail/"+h)};return a.jsxs(W,{title:"Services Detail",children:[a.jsxs("div",{style:{marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx(U,{onClick:b,variant:"contained",disableElevation:!0,children:"Add New Service Info"}),x.toLowerCase()==="superadmin"&&a.jsx(H,{inputValue:c,onInputChange:(i,e)=>f(i,e),sx:{width:"400px"},id:"disable-close-on-select",options:s.map(i=>i.name),getOptionLabel:i=>i,renderInput:i=>a.jsx(M,{...i,placeholder:"Showing Default Company",variant:"standard"})})]}),a.jsx(F,{companyId:h})]})}export{ae as default};
