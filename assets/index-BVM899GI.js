import{d as $,a1 as ee,r as a,j as n,M as te,U as I}from"./index-F_InvB2_.js";import{b as z,a as T}from"./apiClient-OPmdi5JO.js";import{a as ne,b as i}from"./Constants-CkXLzHwj.js";import{T as s}from"./TextField-BRMWykYP.js";import{S as P}from"./Select-Sx36NxJE.js";import{M as r}from"./MenuItem-CHC5mb9d.js";import{B as k}from"./Button-TZaz7Msl.js";import"./InputLabel-h-ajk-HL.js";const ye=()=>{const D=$();let{id:d}=ee();const[A,ae]=a.useState(!1),[m,S]=a.useState(""),[c,N]=a.useState(""),[p,w]=a.useState(0),[y,M]=a.useState(0),[h,W]=a.useState(0),[g,B]=a.useState("male"),[G,O]=a.useState(null),[u,L]=a.useState(""),[x,R]=a.useState(""),[v,f]=a.useState(""),[j,F]=a.useState(0),[U,_]=a.useState(""),[C,q]=a.useState([]),[E,J]=a.useState([]),K=async()=>{if(!H())return;let e=new FormData;if(e.append("Id",d),e.append("CompanyId",p),e.append("EmployeeName",m),e.append("EmployeeType",c),e.append("Level",y),e.append("Priority",h),e.append("Gender",g),e.append("Photo",G),e.append("Phonenumber",u),e.append("Email",x),e.append("Designation",v),e.append("BranchId",j),A){e.append("IsDeleted",!0);var l=confirm("are you sure you want to permanently delete this record");if(!l)return}const o=i+"/Employee/save-employee-record";await z(o,e),D(-1)},Q=async()=>{if(!H())return;let e=new FormData;e.append("Id",d),e.append("CompanyId",p),e.append("EmployeeName",m),e.append("EmployeeType",c),e.append("Level",y),e.append("Priority",h),e.append("Gender",g),e.append("Photo",G),e.append("Phonenumber",u),e.append("Email",x),e.append("Designation",v),e.append("BranchId",j),e.append("IsDeleted",!0);var l=confirm("are you sure you want to permanently delete this record");if(!l)return;const o=i+"/Employee/save-employee-record";await z(o,e),D(-1)},H=()=>{let t=[];p||t.push("Company is mandatory"),m==""&&t.push("Employee Name is mandatory"),u==""&&t.push("Phonenumber is mandatory");let e=t.join(`
`);return t.length>0?(alert(e),!1):!0},X=async()=>{const t=i+"/Company/get-companies/",e=await T(t);q(e)},V=async t=>{const e=i+"/Branch/get-all-branches-for-company/"+t;let l=await T(e);J(l)};a.useEffect(()=>{X()},[]);const Y=async()=>{var l;const t=i+"/Employee/get-employee-by-id/"+d;let e=await T(t);console.log("all the results are here",e),S(e.employeeName),f(e.designation),N((l=e.employeeType)==null?void 0:l.toLowerCase()),L(e.phonenumber),R(e.email),f(e.designation),B(e.gender),w(e.companyId),V(e.companyId),F(e.branchId),W(e.priority),M(Number(e.level)),setTimeout(()=>{let o=e.photo.split("/"),Z=ne+e.companyId+"/"+o.pop();_(Z)},500)};a.useEffect(()=>{Y()},[d]);const b={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return n.jsxs(te,{title:"Creating new Employee",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Name"}),n.jsx(s,{id:"outlined-basic",value:m,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return S((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Level"}),n.jsx(s,{id:"outlined-basic",value:y,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return M((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Priority"}),n.jsx(s,{id:"outlined-basic",value:h,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return W((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Photo"}),n.jsx("div",{children:U&&n.jsx("img",{src:U,alt:"employeeimage",width:"300",height:"200"})}),n.jsx(s,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;O((e=t==null?void 0:t.target)==null?void 0:e.files[0]),_(null)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Designation"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:v,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return f((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Email"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:x,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return R((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Phonenumber"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:u,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return L((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(I,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Gender"}),n.jsxs(P,{labelId:"demo-select-small-label",id:"demo-select-small",value:g,width:"300px",placeholder:"Choose your Company",MenuProps:b,onChange:t=>{var e;return B((e=t==null?void 0:t.target)==null?void 0:e.value)},children:[n.jsx(r,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(r,{value:"male",children:"Male"}),n.jsx(r,{value:"female",children:"Female"})]})]})})}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Type "}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:c,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return N((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(I,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Company"}),n.jsxs(P,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(p),width:"300px",placeholder:"Choose your Company",MenuProps:b,onChange:t=>{var e,l;w(Number((e=t==null?void 0:t.target)==null?void 0:e.value)),V((l=t==null?void 0:t.target)==null?void 0:l.value)},children:[n.jsx(r,{value:"",children:n.jsx("em",{children:"None"})}),C==null?void 0:C.map(t=>n.jsx(r,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id))]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(I,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),n.jsxs(P,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(j),width:"300px",placeholder:"Choose your Company",MenuProps:b,onChange:t=>{var e;return F((e=t==null?void 0:t.target)==null?void 0:e.value)},children:[n.jsx(r,{value:"",children:n.jsx("em",{children:"None"})}),E==null?void 0:E.map(t=>n.jsx(r,{value:t==null?void 0:t.id,children:t==null?void 0:t.title},t==null?void 0:t.id))]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(k,{variant:"contained",onClick:()=>K(),children:"Save Changes"}),n.jsx(k,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{Q()},children:"Delete"})]})]})};export{ye as default};
