import{d as _,Z as G,r,j as e,M as H,F as k}from"./index-DXOqlz8S.js";import{h as T,a as I}from"./apiClient-BdZFA0eS.js";import{b as u}from"./Constants-DP-d7XJz.js";import{T as b}from"./TextField-Dwy0TTj8.js";import{S as V}from"./Switch-C_oBb0h1.js";import{S as F}from"./Select-B0zV3ojE.js";import{M as f}from"./MenuItem-DDRGYG7L.js";import{B as S}from"./Button-K3mHJVKx.js";import"./InputLabel-CjDmApQ-.js";import"./SwitchBase-BSCuTj4E.js";const Y=()=>{const v=_();let{id:a,compid:x}=G();r.useState(!1);const[l,y]=r.useState(""),[o,g]=r.useState(""),[d,j]=r.useState(0),[c,h]=r.useState(!0),[p,D]=r.useState([]),E=async()=>{if(!C())return;let s={id:a,title:l,description:o,companyId:d,isActive:c};const m=u+"/Branch/save-branch";await T(m,s),v(-1)},P=async()=>{if(!C())return;let s={id:a,title:l,description:o,companyId:d,isActive:c,isDeleted:!0};var m=confirm("are you sure you want to permanently delete this record");if(!m)return;const n=u+"/Branch/save-branch";await T(n,s),v(-1)},C=()=>{let t=[];d||t.push("Company is mandatory"),l==""&&t.push("Title Name is mandatory"),o==""&&t.push("Description is mandatory");let s=t.join(`
`);return t.length>0?(alert(s),!1):!0},B=async()=>{const t=u+"/Company/get-companies/",s=await I(t);D(s)};r.useEffect(()=>{B()},[]);const M=async()=>{const t=u+"/Branch/get-all-branches-for-company/"+x;let n=(await I(t)).filter(A=>A.id==a)[0];y(n.title),g(n.description),h(n.isActive),j(n.companyId)};r.useEffect(()=>{M()},[a,x]);const w={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},i=JSON.parse(sessionStorage.getItem("user")),N=t=>{h(t.target.checked)};return e.jsxs(H,{title:"Creating new Employee",children:[e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx("span",{children:"Branch Name"}),e.jsx(b,{id:"outlined-basic",value:l,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var s;return y((s=t==null?void 0:t.target)==null?void 0:s.value)}})]}),e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx("span",{children:"Branch Description"}),e.jsx(b,{id:"outlined-basic",variant:"outlined",value:o,autoComplete:"off",fullWidth:!0,onChange:t=>{var s;return g((s=t==null?void 0:t.target)==null?void 0:s.value)}})]}),e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx("span",{children:"Is Active? "}),e.jsx(V,{checked:c,onChange:N,inputProps:{"aria-label":"controlled"}})]}),e.jsx("div",{style:{marginTop:"0rem"},children:e.jsx(k,{sx:{m:0,minWidth:120},size:"small",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),e.jsxs(F,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(d),width:"300px",placeholder:"Choose your Company",MenuProps:w,onChange:t=>{var s;j(Number((s=t==null?void 0:t.target)==null?void 0:s.value))},children:[e.jsx(f,{value:"",children:e.jsx("em",{children:"None"})}),p==null?void 0:p.map(t=>(i==null?void 0:i.role)==="superadmin"?e.jsx(f,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):(t==null?void 0:t.id)===(i==null?void 0:i.companyId)?e.jsx(f,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):null)]})]})})}),e.jsx("br",{}),e.jsxs("div",{style:{marginTop:"0.9rem"},children:[e.jsx(S,{variant:"contained",onClick:()=>E(),children:"Save Changes"}),e.jsx(S,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{P()},children:"Delete"})]})]})};export{Y as default};
