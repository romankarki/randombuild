import{r as a,j as i,R as z,d as Z,M as ee}from"./index-BRiPDprX.js";import"./EmployeeTable-ComWYUfB.js";import{D as u,b as v}from"./Constants-C3A6Gqx3.js";import{G as te,A as ie}from"./GetValuesFromLocalStorage-DWh4o8Wy.js";import{a as J,b as _}from"./apiClient-BdZFA0eS.js";import{T as r}from"./TextField-B9RgCfUw.js";import{B as $}from"./Button-CgWm9gs8.js";import"./TableRow-CbL5wReq.js";import"./TablePagination-B-yfh3Wz.js";import"./Select-B1tC3DLq.js";import"./MenuItem-B0v1FVPj.js";import"./InputLabel-BGqQE_mf.js";const ne=({companyId:o,setIsAddDisabled:j})=>{const[n,d]=a.useState(null);a.useState({});const[L,S]=a.useState(""),[I,w]=a.useState(""),[C,b]=a.useState(null),[k,s]=a.useState(null),[l,c]=a.useState(null),[g,T]=a.useState(null),[m,y]=a.useState(null),[p,F]=a.useState(null),[W,ae]=a.useState(null),[D,q]=a.useState([]),B=async()=>{var f,h,x,A,R,V,E,U,P,G,K,N,M,O;let e=v+"/Dashboard/get-dashboard-info/"+o,t=await J(e);t&&(t.imageLink1&&(t.imageLink1=u+o+"/"+((h=(f=t.imageLink1)==null?void 0:f.split("/"))==null?void 0:h.pop())),t.imageLink2&&(t.imageLink2=u+o+"/"+((A=(x=t.imageLink2)==null?void 0:x.split("/"))==null?void 0:A.pop())),t.imageLink3&&(t.imageLink1=u+o+"/"+((V=(R=t.imageLink3)==null?void 0:R.split("/"))==null?void 0:V.pop())),t.videoLink1&&(t.videoLink1=u+o+"/"+((U=(E=t.videoLink1)==null?void 0:E.split("/"))==null?void 0:U.pop())),t.videoLink2&&(t.videoLink2=u+o+"/"+((G=(P=t.videoLink2)==null?void 0:P.split("/"))==null?void 0:G.pop())),t.docLink1&&(t.docLink1=u+o+"/"+((N=(K=t.docLink1)==null?void 0:K.split("/"))==null?void 0:N.pop())),t.docLink2&&(t.docLink2=u+o+"/"+((O=(M=t.docLink2)==null?void 0:M.split("/"))==null?void 0:O.pop()))),d(t),console.log("this is dashboard link",t),j(!!t),await Q()},H=u+o+"/",Q=async()=>{const e=v+"/Dashboard/get-dashboard-image/"+o;let t=await J(e);t.map(f=>{var h,x;f.imageLink=(x=(h=f.imageLink)==null?void 0:h.split("/"))==null?void 0:x.pop()}),q(t)};a.useEffect(()=>{B()},[o]);const X=async()=>{const e=new FormData;e.append("Id",n==null?void 0:n.id),e.append("Title",n==null?void 0:n.title),e.append("CompanyId",o),e.append("Description",n==null?void 0:n.description),e.append("Image1",C),e.append("Image2",k),e.append("Image3",l),e.append("Video1",g),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",W);const t=v+"/Dashboard/save-dashboard-info";await _(t,e),alert("Successfully saved your Changes"),B()},Y=async()=>{const e=new FormData;e.append("Title",L),e.append("Description",I),e.append("CompanyId",o),e.append("Image1",C),e.append("Image2",k),e.append("Image3",l),e.append("Video1",g),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",W);const t=v+"/Dashboard/save-dashboard-info";await _(t,e),alert("Successfully added your Changes"),B()};return i.jsxs(i.Fragment,{children:[!n&&i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsx("p",{children:"Adding a new Dashboard data"}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Dashboard Title"}),i.jsx(r,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return d({...n,title:(t=e==null?void 0:e.target)==null?void 0:t.value})}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Description"}),i.jsx(r,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return d({...n,description:(t=e==null?void 0:e.target)==null?void 0:t.value})}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 1 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return b((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 2 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return s((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 3 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return c((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsx("div",{style:{marginTop:"0.9rem"},children:i.jsx($,{variant:"contained",onClick:()=>Y(),children:"Save Changes"})})]})}),!!n&&i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Dashboard Title"}),i.jsx(r,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return d({...n,title:(t=e==null?void 0:e.target)==null?void 0:t.value})}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Description"}),i.jsx(r,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return d({...n,description:(t=e==null?void 0:e.target)==null?void 0:t.value})}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 1 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return b((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 2 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return s((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsxs("div",{style:{marginTop:"0.9rem"},children:[i.jsx("span",{children:"Image 3 (optional)"}),i.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return c((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),i.jsx("p",{children:"Uploaded Images here"}),D==null?void 0:D.map(e=>i.jsx(i.Fragment,{children:i.jsx("div",{children:i.jsx("a",{href:H+(e==null?void 0:e.imageLink),children:"Uploaded Image"})},e==null?void 0:e.id)})),i.jsx("div",{style:{marginTop:"0.9rem"},children:i.jsx($,{variant:"contained",onClick:()=>X(),children:"Save Changes"})})]})})]})},oe=ne;function ve(){const[o,j]=z.useState([]),[n,d]=a.useState(""),[L,S]=a.useState(1),[I,w]=a.useState(!1),C=(s,l)=>{d(l);let c=o==null?void 0:o.filter(g=>g.name==l)[0];c&&S(c.id)};async function b(){const s=sessionStorage.getItem("user")||{},l=JSON.parse(s),c=(l==null?void 0:l.token)||"",g=v+"/Company/get-companies",T=await fetch(g,{method:"GET",headers:{Authorization:"Bearer "+c}});T.ok||alert("someting went wrong");const m=await T.json();j(m);let y=m==null?void 0:m.filter(F=>F.id==l.companyId),p=(y==null?void 0:y.pop())||null;p&&(d(p.name),S(p==null?void 0:p.id))}z.useEffect(()=>{b()},[]),Z();const k=te();return a.useEffect(()=>{},[n]),i.jsxs(ee,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[i.jsx("p",{}),k.toLowerCase()==="superadmin"?i.jsx(ie,{inputValue:n,onInputChange:(s,l)=>C(s,l),sx:{width:"400px"},id:"disable-close-on-select",options:o.map(s=>s.name),getOptionLabel:s=>s,renderInput:s=>(s.inputProps.value||(s.inputProps.value="Admin"),i.jsx(r,{...s,placeholder:"Showing Default Company",variant:"standard"}))}):null]}),i.jsx(oe,{companyId:L,setIsAddDisabled:w})]})}export{ve as default};
