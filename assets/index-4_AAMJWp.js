import{d as $,Z as ee,r as s,j as n,M as te,F as U}from"./index-DXOqlz8S.js";import{b as ne,h as se,a as G}from"./apiClient-BdZFA0eS.js";import{N as x,b as c}from"./Constants-DP-d7XJz.js";import{R as ie}from"./index-C0rifZ1h.js";import{T as H}from"./TextField-Dwy0TTj8.js";import{S as oe}from"./Switch-C_oBb0h1.js";import{S as W}from"./Select-B0zV3ojE.js";import{M as a}from"./MenuItem-DDRGYG7L.js";import{B}from"./Button-K3mHJVKx.js";import"./InputLabel-CjDmApQ-.js";import"./SwitchBase-BSCuTj4E.js";const he=()=>{const j=$(),{id:d}=ee(),[m,O]=s.useState([]),[y,f]=s.useState(!0),[h,v]=s.useState(""),[C,T]=s.useState(0),[I,p]=s.useState("image"),[z,J]=s.useState(null),[Q,g]=s.useState(""),[w,N]=s.useState(""),[V,S]=s.useState(".jpg,.jpeg,.png"),Z=async()=>{let e=new FormData;e.append("id",d),e.append("text",h),e.append("fileType",I),e.append("companyId",C),e.append("file",z),e.append("description",w),e.append("isActive",y);const t=c+"/NewsAndNotice/save-news-notice";await ne(t,e),j(-1)},q=async()=>{var e=confirm("are you sure you want to permanently delete this record");if(!e)return;const t=c+"/NewsAndNotice/delete-news-notice/"+d;await se(t,{}),j(-1)},K=async()=>{const e=c+"/Company/get-companies/",t=await G(e);O(t)},X=async()=>{var i,P,k,D,A,F,E,L,M,R,_;const e=c+"/NewsAndNotice/get-news-notice/"+d,t=await G(e);if(v(t.text),N(t.description),T(t.companyId),f(t.isActive),((i=t==null?void 0:t.docLink)==null?void 0:i.length)>1){const l=(D=(k=(P=t==null?void 0:t.docLink)==null?void 0:P.split("/"))==null?void 0:k.pop())==null?void 0:D.toString(),r=x+(t==null?void 0:t.companyId)+"/"+l;g(r),p("pdf"),u("pdf")}else if(((A=t==null?void 0:t.imageLink)==null?void 0:A.length)>1){const l=(L=(E=(F=t==null?void 0:t.imageLink)==null?void 0:F.split("/"))==null?void 0:E.pop())==null?void 0:L.toString(),r=x+(t==null?void 0:t.companyId)+"/"+l;g(r),p("image"),u("image")}else{const l=(_=(R=(M=t==null?void 0:t.videoLink)==null?void 0:M.split("/"))==null?void 0:R.pop())==null?void 0:_.toString(),r=x+(t==null?void 0:t.companyId)+"/"+l;g(r),p("video")}};s.useEffect(()=>{K()},[]),s.useEffect(()=>{X()},[d]);const b={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},u=e=>{e=="image"?S(".jpg,.jpeg,.png"):S(".pdf,.doc,.docx")},o=JSON.parse(sessionStorage.getItem("user")),Y=e=>{f(e.target.checked)};return n.jsxs(te,{title:"Add Record To News & Notice",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Title"}),n.jsx(H,{id:"outlined-basic",value:h,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return v((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Description"}),n.jsx(ie,{style:{height:"150px"},value:w,onChange:N}),n.jsx("br",{}),n.jsx("br",{})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Is Active? "}),n.jsx(oe,{checked:y,onChange:Y,inputProps:{"aria-label":"controlled"}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Choose File "}),n.jsx("span",{style:{width:"2rem"},children:"      "}),n.jsx("a",{href:Q,target:"_blank",children:"Uploaded File"}),n.jsx(H,{inputProps:{accept:V},id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return J((t=e==null?void 0:e.target)==null?void 0:t.files[0])}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(U,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Content"}),n.jsxs(W,{labelId:"demo-select-small-label",id:"demo-select-small",value:I,width:"300px",placeholder:"Choose your Content",MenuProps:b,onChange:e=>{var t,i;p((t=e==null?void 0:e.target)==null?void 0:t.value),u((i=e==null?void 0:e.target)==null?void 0:i.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(a,{value:"image",children:"Image"}),n.jsx(a,{value:"pdf",children:"PDF"})]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(U,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),n.jsxs(W,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(C),width:"300px",placeholder:"Choose your Company",MenuProps:b,onChange:e=>{var t,i;T(Number((t=e==null?void 0:e.target)==null?void 0:t.value)),fetchBranch((i=e==null?void 0:e.target)==null?void 0:i.value)},children:[n.jsx(a,{value:"",children:n.jsx("em",{children:"None"})}),m==null?void 0:m.map(e=>(o==null?void 0:o.role)==="superadmin"?n.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(o==null?void 0:o.companyId)?n.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(B,{variant:"contained",onClick:()=>Z(),children:"Save Changes"}),n.jsx(B,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{q()},children:"Delete"})]})]})};export{he as default};
