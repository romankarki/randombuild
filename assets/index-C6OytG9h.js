import{r as s,j as t,R as H,d as oe,M as ae}from"./index-BelM-Cwh.js";import"./EmployeeTable-BG_FEUbl.js";import{D as u,b as C}from"./Constants-B45_vLd7.js";import{G as se,A as le}from"./GetValuesFromLocalStorage-CUwxGn-w.js";import{a as Q,b as X}from"./apiClient-BdZFA0eS.js";import{T as o}from"./TextField-DJwYcjoN.js";import{B as Y}from"./Button-DyCpSJgt.js";import"./TableRow-BWqDjPZX.js";import"./TablePagination-BdoigSU3.js";import"./Select-BZ9ul-t8.js";import"./MenuItem-FEZJac9C.js";import"./InputLabel-B05guniO.js";const re=({companyId:a,setIsAddDisabled:b})=>{var A,R,E,U;const[n,d]=s.useState(null);s.useState({});const[S,w]=s.useState(""),[I,D]=s.useState(""),[k,y]=s.useState(null),[L,l]=s.useState(null),[r,c]=s.useState(null),[f,h]=s.useState(null),[m,g]=s.useState(null),[p,T]=s.useState(null),[V,F]=s.useState(null),[W,Z]=s.useState([]),B=async()=>{var x,j,v,P,_,G,K,N,M,O,z,J,$,q;let e=C+"/Dashboard/get-dashboard-info/"+a,i=await Q(e);i&&(i.imageLink1&&(i.imageLink1=u+a+"/"+((j=(x=i.imageLink1)==null?void 0:x.split("/"))==null?void 0:j.pop())),i.imageLink2&&(i.imageLink2=u+a+"/"+((P=(v=i.imageLink2)==null?void 0:v.split("/"))==null?void 0:P.pop())),i.imageLink3&&(i.imageLink1=u+a+"/"+((G=(_=i.imageLink3)==null?void 0:_.split("/"))==null?void 0:G.pop())),i.videoLink1&&(i.videoLink1=u+a+"/"+((N=(K=i.videoLink1)==null?void 0:K.split("/"))==null?void 0:N.pop())),i.videoLink2&&(i.videoLink2=u+a+"/"+((O=(M=i.videoLink2)==null?void 0:M.split("/"))==null?void 0:O.pop())),i.docLink1&&(i.docLink1=u+a+"/"+((J=(z=i.docLink1)==null?void 0:z.split("/"))==null?void 0:J.pop())),i.docLink2&&(i.docLink2=u+a+"/"+((q=($=i.docLink2)==null?void 0:$.split("/"))==null?void 0:q.pop()))),d(i),console.log("this is dashboard link",i),b(!!i),await ie()},ee=u+a+"/",ie=async()=>{const e=C+"/Dashboard/get-dashboard-image/"+a;let i=await Q(e);i.map(x=>{var j,v;x.imageLink=(v=(j=x.imageLink)==null?void 0:j.split("/"))==null?void 0:v.pop()}),Z(i)};s.useEffect(()=>{B()},[a]);const te=async()=>{const e=new FormData;e.append("Id",n==null?void 0:n.id),e.append("Title",n==null?void 0:n.title),e.append("CompanyId",a),e.append("Description",n==null?void 0:n.description),e.append("Image1",k),e.append("Image2",L),e.append("Image3",r),e.append("Video1",f),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",V);const i=C+"/Dashboard/save-dashboard-info";await X(i,e),alert("Successfully saved your Changes"),B()},ne=async()=>{const e=new FormData;e.append("Title",S),e.append("Description",I),e.append("CompanyId",a),e.append("Image1",k),e.append("Image2",L),e.append("Image3",r),e.append("Video1",f),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",V);const i=C+"/Dashboard/save-dashboard-info";await X(i,e),alert("Successfully added your Changes"),B()};return t.jsxs(t.Fragment,{children:[!n&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("p",{children:"Adding a new Dashboard data"}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(o,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(o,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return y((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return l((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 1 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return h((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 2 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return g((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 1 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return T((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 2 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return F((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(Y,{variant:"contained",onClick:()=>ne(),children:"Save Changes"})})]})}),!!n&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(o,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(o,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return y((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return l((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 1 (optional)"}),((A=n==null?void 0:n.videoLink1)==null?void 0:A.length)>1&&t.jsx("p",{children:t.jsx("a",{_target:"blank",href:n.videoLink1,children:"view current file"})}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return h((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 2 (optional)"}),((R=n==null?void 0:n.videoLink2)==null?void 0:R.length)>1&&t.jsxs("p",{children:[" ",t.jsx("a",{target:"_blank",href:n.videoLink2,children:"show current file"})]}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return g((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 1 (optional)"}),((E=n==null?void 0:n.docLink1)==null?void 0:E.length)>1&&t.jsx("p",{children:t.jsx("a",{target:"_blank",href:n.docLink1,children:"show current file"})}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return T((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 2 (optional)"}),((U=n==null?void 0:n.docLink2)==null?void 0:U.length)>1&&t.jsx("p",{children:t.jsx("a",{target:"_blank",href:n.docLink2,children:"show current file"})}),t.jsx(o,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return F((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("p",{children:"Upload Images here"}),W==null?void 0:W.map(e=>t.jsx(t.Fragment,{children:t.jsx("div",{children:t.jsx("a",{href:ee+(e==null?void 0:e.imageLink),children:"Uploaded Image"})},e==null?void 0:e.id)})),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(Y,{variant:"contained",onClick:()=>te(),children:"Save Changes"})})]})})]})},de=re;function ke(){const[a,b]=H.useState([]),[n,d]=s.useState(""),[S,w]=s.useState(1),[I,D]=s.useState(!1),k=(l,r)=>{d(r);let c=a==null?void 0:a.filter(f=>f.name==r)[0];c&&w(c.id)};async function y(){const l=sessionStorage.getItem("user")||{},r=JSON.parse(l),c=(r==null?void 0:r.token)||"",f=C+"/Company/get-companies",h=await fetch(f,{method:"GET",headers:{Authorization:"Bearer "+c}});h.ok||alert("someting went wrong");const m=await h.json();b(m);let g=m==null?void 0:m.filter(T=>T.id==r.companyId),p=(g==null?void 0:g.pop())||null;p&&(d(p.name),w(p==null?void 0:p.id))}H.useEffect(()=>{y()},[]),oe();const L=se();return s.useEffect(()=>{},[n]),t.jsxs(ae,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[t.jsx("p",{}),L.toLowerCase()==="superadmin"?t.jsx(le,{inputValue:n,onInputChange:(l,r)=>k(l,r),sx:{width:"400px"},id:"disable-close-on-select",options:a.map(l=>l.name),getOptionLabel:l=>l,renderInput:l=>(l.inputProps.value||(l.inputProps.value="Admin"),t.jsx(o,{...l,placeholder:"Showing Default Company",variant:"standard"}))}):null]}),t.jsx(de,{companyId:S,setIsAddDisabled:D})]})}export{ke as default};
