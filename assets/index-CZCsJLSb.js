import{d as O,Z as _,r as i,j as s,M as G,F as H}from"./index-DXOqlz8S.js";import{h as C,a as E}from"./apiClient-BdZFA0eS.js";import{b as m}from"./Constants-DP-d7XJz.js";import"./index.esm-CZRM40cu.js";import{T as S}from"./TextField-Dwy0TTj8.js";import{S as B}from"./Switch-C_oBb0h1.js";import{S as V}from"./Select-B0zV3ojE.js";import{M as y}from"./MenuItem-DDRGYG7L.js";import{B as w}from"./Button-K3mHJVKx.js";import"./InputLabel-CjDmApQ-.js";import"./SwitchBase-BSCuTj4E.js";const st=()=>{const x=O();let{id:o}=_();i.useState(!1);const[l,f]=i.useState(""),[L,I]=i.useState(""),[R,N]=i.useState(""),[p,g]=i.useState(""),[u,v]=i.useState(!0),[d,j]=i.useState(0),[c,T]=i.useState([]);i.useState([]);const b=async()=>{if(!D())return;const e={id:Number(o),details:l,companyId:d,updatedExpiryDate:p,noOfDaysForExpiry:2,links:"",isActive:u},n=m+"/NewsAndNotice/save-flash-news";await C(n,e),x(-1)},A=async()=>{if(!D())return;const e={id:o,details:l,companyId:d,updatedExpiryDate:p,isDeleted:!0,noOfDaysForExpiry:2,links:"",isActive:u};var n=confirm("are you sure you want to permanently delete this record");if(!n)return;const r=m+"/NewsAndNotice/save-flash-news";await C(r,e),x(-1)},D=()=>{let t=[];d||t.push("Company is mandatory"),l||t.push("Details is require");let e=t.join(`
`);return t.length>0?(alert(e),!1):!0},P=async()=>{const t=m+"/Company/get-companies/",e=await E(t);T(e)};i.useEffect(()=>{P()},[]);const F=async()=>{var h;const t=m+"/NewsAndNotice/get-flash-news-by-id/"+o;let e=await E(t);f(e==null?void 0:e.content),N(e==null?void 0:e.expiryDate);let n=(h=e==null?void 0:e.expiryDate)==null?void 0:h.split(" ")[0],r=new Date(n).toISOString().split("T")[0];console.log("date after parsing",r),console.log("result format of expiry date",r),g(r),I(e==null?void 0:e.links),v(e==null?void 0:e.isActive),j(e==null?void 0:e.companyId)};i.useEffect(()=>{F()},[o]);const M={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},a=JSON.parse(sessionStorage.getItem("user")),k=t=>{v(t.target.checked)};return s.jsxs(G,{title:"Editing Flash News",children:[s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Details"}),s.jsx(S,{id:"outlined-basic",value:l,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return f((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Expiry Date"}),s.jsx(S,{type:"date",id:"outlined-basic",variant:"outlined",value:p,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return g((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Is Active? "}),s.jsx(B,{checked:u,onChange:k,inputProps:{"aria-label":"controlled"}})]}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(H,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),s.jsxs(V,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(d),width:"300px",placeholder:"Choose your Company",MenuProps:M,onChange:t=>{var e;j(Number((e=t==null?void 0:t.target)==null?void 0:e.value))},children:[s.jsx(y,{value:"",children:s.jsx("em",{children:"None"})}),c==null?void 0:c.map(t=>(a==null?void 0:a.role)==="superadmin"?s.jsx(y,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):(t==null?void 0:t.id)===(a==null?void 0:a.companyId)?s.jsx(y,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id):null)]})]})})}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx(w,{variant:"contained",onClick:()=>b(),children:"Save Changes"}),s.jsx(w,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{A()},children:"Delete"})]})]})};export{st as default};
