import{d as M,a1 as F,r as a,j as s,M as k,U as O}from"./index-CoTWwNBX.js";import{h as g,a as v}from"./apiClient-BLOXFteY.js";import{b as d}from"./Constants-CWhQMY-H.js";import"./index.esm-EeMdMxQv.js";import{T as D}from"./TextField-CGXPn3nd.js";import{S as _}from"./Select-CAzHpHcT.js";import{M as j}from"./MenuItem-BZ2ojD08.js";import{B as E}from"./Button-u55cg9oV.js";import"./InputLabel-DrVkDPBj.js";const Q=()=>{const c=M();let{id:r}=F();a.useState(!1);const[o,u]=a.useState(""),[A,C]=a.useState(""),[G,w]=a.useState(""),[m,y]=a.useState(""),[l,f]=a.useState(0),[p,N]=a.useState([]);a.useState([]);const I=async()=>{if(!x())return;const t={id:Number(r),details:o,companyId:l,updatedExpiryDate:m,noOfDaysForExpiry:2,links:""},n=d+"/NewsAndNotice/save-flash-news";await g(n,t),c(-1)},T=async()=>{if(!x())return;const t={id:r,details:o,companyId:l,updatedExpiryDate:m,isDeleted:!0,noOfDaysForExpiry:2,links:""};var n=confirm("are you sure you want to permanently delete this record");if(!n)return;const i=d+"/NewsAndNotice/save-flash-news";await g(i,t),c(-1)},x=()=>{let e=[];l||e.push("Company is mandatory"),o||e.push("Details is require");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},S=async()=>{const e=d+"/Company/get-companies/",t=await v(e);N(t)};a.useEffect(()=>{S()},[]);const b=async()=>{var h;const e=d+"/NewsAndNotice/get-flash-news-by-id/"+r;let t=await v(e);u(t==null?void 0:t.content),w(t==null?void 0:t.expiryDate);let n=(h=t==null?void 0:t.expiryDate)==null?void 0:h.split(" ")[0],i=new Date(n).toISOString().split("T")[0];console.log("date after parsing",i),console.log("result format of expiry date",i),y(i),C(t==null?void 0:t.links),f(t==null?void 0:t.companyId)};a.useEffect(()=>{b()},[r]);const P={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return s.jsxs(k,{title:"Editing Flash News",children:[s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Details"}),s.jsx(D,{id:"outlined-basic",value:o,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return u((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Expiry Date"}),s.jsx(D,{type:"date",id:"outlined-basic",variant:"outlined",value:m,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return y((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(O,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),s.jsxs(_,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(l),width:"300px",placeholder:"Choose your Company",MenuProps:P,onChange:e=>{var t;f(Number((t=e==null?void 0:e.target)==null?void 0:t.value))},children:[s.jsx(j,{value:"",children:s.jsx("em",{children:"None"})}),p==null?void 0:p.map(e=>s.jsx(j,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id))]})]})})}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx(E,{variant:"contained",onClick:()=>I(),children:"Save Changes"}),s.jsx(E,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{T()},children:"Delete"})]})]})};export{Q as default};
