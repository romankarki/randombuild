import{d as k,Z as B,r as a,j as n,M as L,F as J}from"./index-DXOqlz8S.js";import{h as M,a as A}from"./apiClient-BdZFA0eS.js";import{b as f}from"./Constants-DP-d7XJz.js";import{T as o}from"./TextField-Dwy0TTj8.js";import{S as U}from"./Select-B0zV3ojE.js";import{M as j}from"./MenuItem-DDRGYG7L.js";import{B as V}from"./Button-K3mHJVKx.js";import"./InputLabel-CjDmApQ-.js";const re=()=>{const y=k();let{id:d,compid:q}=B();const[W,Z]=a.useState(!1),[l,D]=a.useState(0),[u,b]=a.useState(""),[r,N]=a.useState(new Date),[s,g]=a.useState(new Date),[m,S]=a.useState(""),[p,P]=a.useState(""),[c,T]=a.useState(""),[x,I]=a.useState(""),[C,E]=a.useState(""),[h,_]=a.useState([]),G=async()=>{if(!w())return;let t={Id:d,TopicName:u,Venue:m,StartDate:r,EndDate:s,CoordinatorName:p,CoordinatorPhoneNumber:c,AssistantCoordinatorName:x,AssistantCoordinatorPhoneNumber:C,CompanyId:l,IsDeleted:W};const v=f+"/Meetings/save-company-meeting-info";await M(v,t),y(-1)},H=async()=>{if(!w())return;let t={Id:d,TopicName:u,Venue:m,StartDate:r,EndDate:s,CoordinatorName:p,CoordinatorPhoneNumber:c,AssistantCoordinatorName:x,AssistantCoordinatorPhoneNumber:C,CompanyId:l,IsDeleted:!0};var v=confirm("are you sure you want to permanently delete this record");if(!v)return;const O=f+"/Meetings/save-company-meeting-info";await M(O,t),y(-1)},w=()=>{let e=[];u==""&&e.push("Name of Topic is required"),(r==""||r==null)&&e.push("Start Date is required"),(s==""||s==null)&&e.push("End Date is required"),m==""&&e.push("Venue is required"),p==""&&e.push("Coordinator Name is required"),c==""&&e.push("Coordinator Phone Number is required"),l==""&&e.push("Company is required");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},R=async()=>{const e=f+"/Company/get-companies/",t=await A(e);_(t)};a.useEffect(()=>{R()},[]);const z=async()=>{const e=f+"/Meetings/get-meeting/"+d;let t=await A(e);b(t.topicName),D(t.companyId),N(t.startDate),g(t.endDate),S(t.venue),P(t.coordinatorName),T(t.coordinatorPhoneNumber),I(t.assistantCoordinatorName),E(t.assistantCoordinatorPhoneNumber)};a.useEffect(()=>{z()},[d,q]);const F={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},i=JSON.parse(sessionStorage.getItem("user"));return n.jsxs(L,{title:"Editing Meetings",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Name of Title"}),n.jsx(o,{id:"outlined-basic",value:u,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return b((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem",display:"flex",gap:"1rem"},children:[n.jsxs("div",{children:[n.jsx("span",{children:"Start Date: "}),n.jsx("input",{type:"datetime-local",id:"start-date",value:r,onChange:e=>{const t=e.target.value;N(t),s&&new Date(t)>new Date(s)&&g("")},style:{padding:"0.5rem",border:"1px solid #007bff",borderRadius:"4px",fontSize:"1rem",width:"220px"}})]}),n.jsxs("div",{children:[n.jsx("span",{children:"End Date: "}),n.jsx("input",{type:"datetime-local",id:"end-date",value:s,onChange:e=>{const t=e.target.value;if(new Date(t)<new Date(r)){alert("End date cannot be less than start date");return}g(t)},style:{padding:"0.5rem",border:"1px solid #007bff",borderRadius:"4px",fontSize:"1rem",outline:"none",width:"220px"}})]})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Venue"}),n.jsx(o,{id:"outlined-basic",value:m,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return S((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Coordinator Name"}),n.jsx(o,{id:"outlined-basic",value:p,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return P((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Coordinator Phonenumber"}),n.jsx(o,{id:"outlined-basic",variant:"outlined",value:c,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return T((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Assistant Coordinator Name"}),n.jsx(o,{id:"outlined-basic",value:x,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return I((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Assistant Coordinator Phonenumber"}),n.jsx(o,{id:"outlined-basic",variant:"outlined",value:C,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return E((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(J,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),n.jsxs(U,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(l),width:"300px",placeholder:"Choose your Company",MenuProps:F,onChange:e=>{var t;D(Number((t=e==null?void 0:e.target)==null?void 0:t.value))},children:[n.jsx(j,{value:"",children:n.jsx("em",{children:"None"})}),h==null?void 0:h.map(e=>(i==null?void 0:i.role)==="superadmin"?n.jsx(j,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(i==null?void 0:i.companyId)?n.jsx(j,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(V,{variant:"contained",onClick:()=>G(),children:"Save Changes"}),n.jsx(V,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{H()},children:"Delete"})]})]})};export{re as default};
