import{d as le,a1 as ne,r as n,j as l,M as se,U as g}from"./index-BRiPDprX.js";import{b as A,a as x}from"./apiClient-BdZFA0eS.js";import{a as ae,b as d}from"./Constants-C3A6Gqx3.js";import{T as i}from"./TextField-B9RgCfUw.js";import{S as h}from"./Select-B1tC3DLq.js";import{M as a}from"./MenuItem-B0v1FVPj.js";import{B as J}from"./Button-CgWm9gs8.js";import"./InputLabel-BGqQE_mf.js";const he=()=>{const D=le();let{id:m}=ne();const[q,re]=n.useState(!1),[p,N]=n.useState(""),[v,M]=n.useState(""),[u,W]=n.useState(0),[j,B]=n.useState(0),[f,G]=n.useState(0),[C,L]=n.useState("male"),[R,K]=n.useState(null),[y,F]=n.useState(""),[E,U]=n.useState(""),[b,I]=n.useState(""),[T,_]=n.useState(0),[H,z]=n.useState(""),[P,Q]=n.useState([]),[S,X]=n.useState([]),Y=async()=>{if(!V())return;let t=new FormData;if(t.append("Id",m),t.append("CompanyId",u),t.append("EmployeeName",p),t.append("EmployeeType",v),t.append("Level",j),t.append("Priority",f),t.append("Gender",C),t.append("Photo",R),t.append("Phonenumber",y),t.append("Email",E),t.append("Designation",b),t.append("BranchId",T),q){t.append("IsDeleted",!0);var s=confirm("are you sure you want to permanently delete this record");if(!s)return}const r=d+"/Employee/save-employee-record";await A(r,t),D(-1)},Z=async()=>{if(!V())return;let t=new FormData;t.append("Id",m),t.append("CompanyId",u),t.append("EmployeeName",p),t.append("EmployeeType",v),t.append("Level",j),t.append("Priority",f),t.append("Gender",C),t.append("Photo",R),t.append("Phonenumber",y),t.append("Email",E),t.append("Designation",b),t.append("BranchId",T),t.append("IsDeleted",!0);var s=confirm("are you sure you want to permanently delete this record");if(!s)return;const r=d+"/Employee/save-employee-record";await A(r,t),D(-1)},V=()=>{let e=[];u||e.push("Company is mandatory"),p==""&&e.push("Employee Name is mandatory"),y==""&&e.push("Phonenumber is mandatory");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},$=async()=>{const e=d+"/Company/get-companies/",t=await x(e);Q(t)},O=async e=>{const t=d+"/Branch/get-all-branches-for-company/"+e;let s=await x(t);X(s)},[w,ee]=n.useState([]),k=async e=>{const t=d+"/Employee/get-all-company-employee-category/"+e,s=await x(t);ee(s)};n.useEffect(()=>{$()},[]);const te=async()=>{const e=d+"/Employee/get-employee-by-id/"+m;let t=await x(e);console.log("all the results are here",t),N(t.employeeName),I(t.designation),F(t.phonenumber),U(t.email),I(t.designation),L(t.gender),W(t.companyId),await O(t.companyId),await k(t.companyId),_(t.branchId),G(t.proirity),B(Number(t.level)),M(t.employeeType),setTimeout(()=>{let s=t.photo.split("/"),r=ae+t.companyId+"/"+s.pop();z(r)},500)};n.useEffect(()=>{te()},[m]);const c={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},o=JSON.parse(sessionStorage.getItem("user"));return l.jsxs(se,{title:"Creating new Employee",children:[l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Name"}),l.jsx(i,{id:"outlined-basic",value:p,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return N((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Level"}),l.jsx(i,{id:"outlined-basic",value:j,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return B((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Priority"}),l.jsx(i,{id:"outlined-basic",value:f,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return G((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Photo"}),l.jsx("div",{children:H&&l.jsx("img",{src:H,alt:"employeeimage",width:"300",height:"200"})}),l.jsx(i,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;K((t=e==null?void 0:e.target)==null?void 0:t.files[0]),z(null)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Designation"}),l.jsx(i,{id:"outlined-basic",variant:"outlined",value:b,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return I((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Email"}),l.jsx(i,{id:"outlined-basic",variant:"outlined",value:E,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return U((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx("span",{children:"Employee Phonenumber"}),l.jsx(i,{id:"outlined-basic",variant:"outlined",value:y,autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return F((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),l.jsx("div",{style:{marginTop:"0rem"},children:l.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{marginRight:"2rem"},children:"Employee Gender"}),l.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:C,width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return L((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[l.jsx(a,{value:"",children:l.jsx("em",{children:"None"})}),l.jsx(a,{value:"male",children:"Male"}),l.jsx(a,{value:"female",children:"Female"})]})]})})}),l.jsx("div",{style:{marginTop:"0rem"},children:l.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{marginRight:"2rem"},children:"Employee Company"}),l.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(u),width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t,s,r;W(Number((t=e==null?void 0:e.target)==null?void 0:t.value)),O((s=e==null?void 0:e.target)==null?void 0:s.value),k((r=e==null?void 0:e.target)==null?void 0:r.value)},children:[l.jsx(a,{value:"",children:l.jsx("em",{children:"None"})}),P==null?void 0:P.map(e=>(o==null?void 0:o.role)==="superadmin"?l.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(o==null?void 0:o.companyId)?l.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),l.jsx("div",{style:{marginTop:"0rem"},children:l.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),l.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(T),width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return _((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[l.jsx(a,{value:"",children:l.jsx("em",{children:"None"})}),S==null?void 0:S.map(e=>l.jsx(a,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),l.jsx("div",{style:{marginTop:"0rem"},children:l.jsx(g,{sx:{m:0,minWidth:120},size:"small",children:l.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[l.jsx("p",{style:{marginRight:"2rem"},children:"Employee Category"}),l.jsxs(h,{labelId:"demo-select-small-label",id:"demo-select-small",value:v,width:"300px",placeholder:"Choose your Company",MenuProps:c,onChange:e=>{var t;return M((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[l.jsx(a,{value:"",children:l.jsx("em",{children:"None"})}),w==null?void 0:w.map(e=>l.jsx(a,{value:e==null?void 0:e.title,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),l.jsx("br",{}),l.jsxs("div",{style:{marginTop:"0.9rem"},children:[l.jsx(J,{variant:"contained",onClick:()=>Y(),children:"Save Changes"}),l.jsx(J,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{Z()},children:"Delete"})]})]})};export{he as default};
