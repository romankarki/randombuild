import{r as o,d as T,j as n,e as k,R as C,M as I}from"./index-_AWSBuUU.js";import{b as R}from"./Constants-DGXMJ-DT.js";import{T as S,a as E,e as A,c as v,d as y,b as B}from"./TableRow-DhcXuOZB.js";import{R as L,G as W,A as G}from"./GetValuesFromLocalStorage-idXzu9Sl.js";import{T as O}from"./TablePagination-BxifiRkg.js";import{B as U}from"./Button-CJj7kHSd.js";import{T as H}from"./TextField-BObO4OcV.js";import"./Select-eC4K4ZSx.js";import"./MenuItem-CallC8N8.js";import"./InputLabel-B7cXIkNh.js";const P=[{id:"id",label:"Id",minWidth:170},{id:"text",label:"Details",minWidth:100},{id:"companyName",label:"Company Name",minWidth:170,align:"right"},{id:"action",label:"Action",minWidth:170,align:"center"}],z=({companyid:i})=>{const[m,p]=o.useState(0),[r,h]=o.useState(10),[g,f]=o.useState([]);async function u(){const e=sessionStorage.getItem("user")||{},t=JSON.parse(e),s=(t==null?void 0:t.token)||"",c=R+"/NewsAndNotice/get-company-news-notices/"+i,d=await fetch(c,{method:"GET",headers:{Authorization:"Bearer "+s}});d.ok||alert("someting went wrong");const l=await d.json();f(l)}o.useEffect(()=>{u()},[i]);const x=(e,t)=>{p(t)},w=e=>{h(+e.target.value),p(0)},b=T(),a=(e,t)=>{console.log("currently selected item is ....",e),b("/edit/news/"+e.id)};return n.jsxs(k,{sx:{width:"100%",overflow:"hidden"},children:[n.jsx(S,{sx:{maxHeight:440},children:n.jsxs(E,{stickyHeader:!0,"aria-label":"sticky table",children:[n.jsx(A,{children:n.jsx(v,{children:P.map(e=>n.jsx(y,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id))})}),n.jsx(B,{children:g.slice(m*r,m*r+r).map(e=>n.jsx(v,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(t=>{if(t.id=="action")return n.jsx(y,{align:t.align,children:n.jsx(L,{onClick:()=>a(e)})},t.id);const s=e[t.id];return n.jsx(y,{align:t.align,children:t.format&&typeof s=="number"?t.format(s):s},t.id)})},e.id))})]})}),n.jsx(O,{rowsPerPageOptions:[10,25,100],component:"div",count:g.length,rowsPerPage:r,page:m,onPageChange:x,onRowsPerPageChange:w})]})},D=z;function Z(){const[i,m]=C.useState([]),[p,r]=o.useState(""),[h,g]=o.useState(1),f=(a,e)=>{r(e);let t=i==null?void 0:i.filter(s=>s.name==e)[0];t&&g(t.id)};async function u(){const a=sessionStorage.getItem("user")||{},e=JSON.parse(a),t=(e==null?void 0:e.token)||"",s=R+"/Company/get-companies",j=await fetch(s,{method:"GET",headers:{Authorization:"Bearer "+t}});j.ok||alert("someting went wrong");const c=await j.json();m(c);let d=c==null?void 0:c.filter(N=>N.id==e.companyId),l=(d==null?void 0:d.pop())||null;l&&(r(l.name),g(l==null?void 0:l.id))}C.useEffect(()=>{u()},[]),o.useEffect(()=>{},[h]);const x=T(),w=()=>{x("/add/news")},b=W();return o.useEffect(()=>{},[p]),n.jsxs(I,{children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[n.jsx(U,{onClick:w,variant:"contained",disableElevation:!0,children:"Add New"}),b.toLowerCase()==="superadmin"?n.jsx(G,{inputValue:p,onInputChange:(a,e)=>f(a,e),sx:{width:"400px"},id:"disable-close-on-select",options:i.map(a=>a.name),getOptionLabel:a=>a,renderInput:a=>n.jsx(H,{...a,placeholder:"Showing Default Company",variant:"standard"})}):null]}),n.jsx(D,{companyid:h})]})}export{Z as default};
