import{r as l,d as w,j as a,e as k,R as j,M as E}from"./index-BAwjm5YK.js";import"./EmployeeTable-hkY-tC2p.js";import{b as P}from"./Constants-Ctlr_h4s.js";import{T as I,a as N,e as S,c as C,d as y,b as B}from"./TableRow-4YJm6iIj.js";import{R as G}from"./EditOutlined-gDl5BQWR.js";import{T as W}from"./TablePagination-Cns5acdc.js";import{B as A}from"./Button-AuduvB-A.js";import{A as L}from"./Autocomplete-DbP7a9hN.js";import{T as O}from"./TextField-DNL3OJfk.js";import"./Select-CzHIg533.js";import"./MenuItem-Bn-UT2-s.js";import"./InputLabel-CqTv-JMh.js";const T=[{id:"id",label:"Id",minWidth:170},{id:"employeeName",label:"Employee Name",minWidth:100},{id:"grievanceType",label:"Grievance Type",minWidth:170,align:"right"},{id:"branchName",label:"Branch Name",minWidth:170,align:"right"},{id:"companyName",label:"Company Name",minWidth:170,align:"right"},{id:"action",label:"Action",minWidth:170,align:"center"}],H=({companyid:s=1})=>{const[c,g]=l.useState(0),[r,h]=l.useState(10),[d,f]=l.useState([]);async function u(){console.log("this is companyid",s);const e=localStorage.getItem("user")||{},t=JSON.parse(e),o=(t==null?void 0:t.token)||"",p=P+"/Grievance/get-company-grievance-info/"+s,v=await fetch(p,{method:"GET",headers:{Authorization:"Bearer "+o}});v.ok||alert("someting went wrong");const R=await v.json();f(R)}l.useEffect(()=>{u()},[s]);const x=(e,t)=>{g(t)},b=e=>{h(+e.target.value),g(0)},n=w(),i=(e,t)=>{console.log("currently selected item is ....",e),n("/edit/grievance/"+e.id+"/"+s)};return a.jsxs(k,{sx:{width:"100%",overflow:"hidden"},children:[a.jsx(I,{sx:{maxHeight:440},children:a.jsxs(N,{stickyHeader:!0,"aria-label":"sticky table",children:[a.jsx(S,{children:a.jsx(C,{children:T.map(e=>a.jsx(y,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id))})}),a.jsx(B,{children:d.slice(c*r,c*r+r).map(e=>a.jsx(C,{hover:!0,role:"checkbox",tabIndex:-1,children:T.map(t=>{if(t.id=="action")return a.jsx(y,{align:t.align,children:a.jsx(G,{onClick:()=>i(e)})},t.id);const o=e[t.id];return a.jsx(y,{align:t.align,children:t.format&&typeof o=="number"?t.format(o):o},t.id)})},e.id))})]})}),a.jsx(W,{rowsPerPageOptions:[10,25,100],component:"div",count:d.length,rowsPerPage:r,page:c,onPageChange:x,onRowsPerPageChange:b})]})},U=H;function Z(){const[s,c]=j.useState([]),[g,r]=l.useState(""),[h,d]=l.useState(1),f=(n,i)=>{r(i);let e=s==null?void 0:s.filter(t=>t.name==i)[0];e&&d(e.id)};async function u(){var p;const n=localStorage.getItem("user")||{},i=JSON.parse(n),e=(i==null?void 0:i.token)||"",t=P+"/Company/get-companies",o=await fetch(t,{method:"GET",headers:{Authorization:"Bearer "+e}});o.ok||alert("someting went wrong");const m=await o.json();c(m),m.length>0&&(r(m[0].name),d((p=m[0])==null?void 0:p.id))}j.useEffect(()=>{u()},[]);const x=w(),b=()=>{x("/add/grievance")};return a.jsxs(E,{title:"Grievances",children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[a.jsx(A,{onClick:b,variant:"contained",disableElevation:!0,children:"Add New"}),a.jsx(L,{inputValue:g,onInputChange:(n,i)=>f(n,i),sx:{width:"400px"},id:"disable-close-on-select",options:s.map(n=>n.name),getOptionLabel:n=>n,renderInput:n=>a.jsx(O,{...n,variant:"standard"})})]}),a.jsx(U,{companyid:h})]})}export{Z as default};
