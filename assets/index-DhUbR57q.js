import{d as O,Z as F,r as l,j as t,M as L,F as x}from"./index-_AWSBuUU.js";import{h as D,a as g}from"./apiClient-BdZFA0eS.js";import{b as a}from"./Constants-DGXMJ-DT.js";import{S as j}from"./Select-eC4K4ZSx.js";import{M as i}from"./MenuItem-CallC8N8.js";import{S as q}from"./Switch-Bb3rIjd5.js";import{B as M}from"./Button-CJj7kHSd.js";import"./SwitchBase-oREcUv6T.js";const se=()=>{const b=O();let{id:o,compid:d}=F();l.useState(!1);const[m,T]=l.useState(d),[c,E]=l.useState(0),[p,S]=l.useState(""),[f,A]=l.useState([]),[u,w]=l.useState(null),[h,R]=l.useState([]),[C,_]=l.useState([]),[I,G]=l.useState(!0),H=async()=>{if(!N())return;let s={id:o,grievannceType:p,branchId:u,companyId:m,employeeId:c,isActive:I};const n=a+"/Grievance/save-company-grivance-info";await D(n,s),b(-1)},k=async()=>{if(!N())return;let s={id:o,grievannceType:p,branchId:u,companyId:m,employeeId:c,isDeleted:!0,isActive:I};var n=confirm("are you sure you want to permanently delete this record");if(!n)return;const v=a+"/Grievance/save-company-grivance-info";await D(v,s),b(-1)},N=()=>{let e=[];m||e.push("Company is mandatory"),u||e.push("Branch is mandatory"),c||e.push("Employee is mandatory"),p==""&&e.push("Grievance Type is required");let s=e.join(`
`);return e.length>0?(alert(s),!1):!0},z=async()=>{const e=a+"/Company/get-companies/",s=await g(e);A(s)},P=async e=>{const s=a+"/Branch/get-all-branches-for-company/"+e;let n=await g(s);R(n)},B=async e=>{const s=a+"/Employee/get-all-company-employees/"+e;let n=await g(s);_(n)};l.useEffect(()=>{z()},[]);const V=async()=>{await P(d),await B(d);const e=a+"/Grievance/get-grievance/"+o;let s=await g(e);console.log("this is employee id",s.employeeId),w(s.branchId),T(s.companyId),G(s.isActive),E(s.employeeId),S(s.grievanceType)};l.useEffect(()=>{V()},[o,d]);const y={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},r=JSON.parse(sessionStorage.getItem("user")),W=e=>{G(e.target.checked)};return t.jsxs(L,{title:"Creating new Employee",children:[t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(x,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(m),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s,n,v;T(Number((s=e==null?void 0:e.target)==null?void 0:s.value)),P((n=e==null?void 0:e.target)==null?void 0:n.value),B((v=e==null?void 0:e.target)==null?void 0:v.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),f==null?void 0:f.map(e=>(r==null?void 0:r.role)==="superadmin"?t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(r==null?void 0:r.companyId)?t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(x,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(u),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;w((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),h==null?void 0:h.map(e=>t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(x,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Select Employee"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(c),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;E((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),C==null?void 0:C.map(e=>t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.employeeName},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(x,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Select Grievance Type"}),t.jsxs(j,{labelId:"demo-select-small-label",id:"demo-select-small",value:p,width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;S((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),t.jsx(i,{value:"greivance",children:"Grievance"}),t.jsx(i,{value:"responsible",children:"Responsible"})]})]})})}),t.jsx("br",{}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Is Active? "}),t.jsx(q,{checked:I,onChange:W,inputProps:{"aria-label":"controlled"}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx(M,{variant:"contained",onClick:()=>H(),children:"Save Changes"}),t.jsx(M,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{k()},children:"Delete"})]})]})};export{se as default};
