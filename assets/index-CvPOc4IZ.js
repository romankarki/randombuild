import{d as R,r as l,j as s,M as D,F as o}from"./index-DXOqlz8S.js";import{h as _,a as g}from"./apiClient-BdZFA0eS.js";import{b as d}from"./Constants-DP-d7XJz.js";import{S as m}from"./Select-B0zV3ojE.js";import{M as n}from"./MenuItem-DDRGYG7L.js";import{B as H}from"./Button-K3mHJVKx.js";const J=()=>{const C=R();l.useState(""),l.useState("");const[p,I]=l.useState(0),[u,h]=l.useState(0),[y,b]=l.useState(""),[c,T]=l.useState([]),[x,S]=l.useState(null),[v,E]=l.useState([]),[j,N]=l.useState([]),G=async()=>{if(!B())return;let t={grievannceType:y,branchId:x,companyId:p,employeeId:u};const r=d+"/Grievance/save-company-grivance-info";await _(r,t),C(-1)},B=()=>{let e=[];p||e.push("Company is mandatory"),x||e.push("Branch is mandatory"),u||e.push("Employee is mandatory"),y==""&&e.push("Grievance Type is required");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},w=async()=>{const e=d+"/Company/get-companies/",t=await g(e);T(t)};l.useEffect(()=>{w()},[]);const a={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},M=async e=>{const t=d+"/Branch/get-all-branches-for-company/"+e;let r=await g(t);E(r)},P=async e=>{const t=d+"/Employee/get-all-company-employees/"+e;let r=await g(t);N(r)},i=JSON.parse(sessionStorage.getItem("user"));return s.jsxs(D,{title:"Creating new Grievance",children:[s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(o,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Parent Company"}),s.jsxs(m,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(p),width:"300px",placeholder:"Choose your Company",MenuProps:a,onChange:e=>{var t,r,f;I(Number((t=e==null?void 0:e.target)==null?void 0:t.value)),M((r=e==null?void 0:e.target)==null?void 0:r.value),P((f=e==null?void 0:e.target)==null?void 0:f.value)},children:[s.jsx(n,{value:"",children:s.jsx("em",{children:"None"})}),c==null?void 0:c.map(e=>(i==null?void 0:i.role)==="superadmin"?s.jsx(n,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(i==null?void 0:i.companyId)?s.jsx(n,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(o,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),s.jsxs(m,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(x),width:"300px",placeholder:"Choose your Company",MenuProps:a,onChange:e=>{var t;S((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[s.jsx(n,{value:"",children:s.jsx("em",{children:"None"})}),v==null?void 0:v.map(e=>s.jsx(n,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(o,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Select Employee"}),s.jsxs(m,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(u),width:"300px",placeholder:"Choose your Company",MenuProps:a,onChange:e=>{var t;h((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[s.jsx(n,{value:"",children:s.jsx("em",{children:"None"})}),j==null?void 0:j.map(e=>s.jsx(n,{value:e==null?void 0:e.id,children:e==null?void 0:e.employeeName},e==null?void 0:e.id))]})]})})}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(o,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Select Grievance Type"}),s.jsxs(m,{labelId:"demo-select-small-label",id:"demo-select-small",value:y,width:"300px",placeholder:"Choose your Company",MenuProps:a,onChange:e=>{var t;b((t=e==null?void 0:e.target)==null?void 0:t.value)},children:[s.jsx(n,{value:"",children:s.jsx("em",{children:"None"})}),s.jsx(n,{value:"greivance",children:"Grievance"}),s.jsx(n,{value:"responsible",children:"Responsible"})]})]})})}),s.jsx("br",{}),s.jsx("div",{style:{marginTop:"0.9rem"},children:s.jsx(H,{variant:"contained",onClick:()=>G(),children:"Save Changes"})})]})};export{J as default};
