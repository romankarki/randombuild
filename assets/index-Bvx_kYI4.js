import{p as n,r as C,d as re,Z as ie,j as u,M as oe,W as O}from"./index-ZDD_OGMu.js";import{b as ae,h as se,a as A}from"./apiClient-OPmdi5JO.js";import{b as D}from"./Constants-Ctlr_h4s.js";import{R as le}from"./index-DcBUVqE4.js";import{T as N}from"./TextField-D33VU5iS.js";import{S as ce}from"./Switch-B809M7HV.js";import{S as L}from"./Select-CIif3pin.js";import{M as j}from"./MenuItem-C9iTeXka.js";import{B as ue}from"./Button-BJQZiDvD.js";import"./InputLabel-Dw3maVgU.js";import"./SwitchBase-CpVo7noB.js";var B=function(){return B=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},B.apply(this,arguments)},$={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},de=B({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},$),P=function(r){return typeof r=="function"},K=function(r){return r in $},V=function(r){return r.substr(2)},fe=function(r,t,i,o,a,l,e){var s=Object.keys(a).filter(K),d=Object.keys(l).filter(K),f=s.filter(function(p){return l[p]===void 0}),h=d.filter(function(p){return a[p]===void 0});f.forEach(function(p){var m=V(p),b=e[m];i(m,b),delete e[m]}),h.forEach(function(p){var m=o(r,p),b=V(p);e[b]=m,t(b,m)})},pe=function(r,t,i,o,a){return fe(a,r.on.bind(r),r.off.bind(r),function(l,e){return function(s){var d;return(d=l(e))===null||d===void 0?void 0:d(s,r)}},t,i,o)},U=0,X=function(r){var t=Date.now(),i=Math.floor(Math.random()*1e9);return U++,r+"_"+i+U+String(t)},W=function(r){return r!==null&&(r.tagName.toLowerCase()==="textarea"||r.tagName.toLowerCase()==="input")},z=function(r){return typeof r>"u"||r===""?[]:Array.isArray(r)?r:r.split(" ")},ve=function(r,t){return z(r).concat(z(t))},he=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},me=function(r){if(!("isConnected"in Node.prototype)){for(var t=r,i=r.parentNode;i!=null;)t=i,i=t.parentNode;return t===r.ownerDocument}return r.isConnected},G=function(r,t){r!==void 0&&(r.mode!=null&&typeof r.mode=="object"&&typeof r.mode.set=="function"?r.mode.set(t):r.setMode(t))},F=function(){return F=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},F.apply(this,arguments)},ge=function(r,t,i){var o,a,l=r.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=t.id,l.src=t.src,l.async=(o=t.async)!==null&&o!==void 0?o:!1,l.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var e=function(){l.removeEventListener("load",e),l.removeEventListener("error",s),i(t.src)},s=function(d){l.removeEventListener("load",e),l.removeEventListener("error",s),i(t.src,d)};l.addEventListener("load",e),l.addEventListener("error",s),r.head&&r.head.appendChild(l)},ye=function(r){var t={},i=function(e,s){var d=t[e];d.done=!0,d.error=s;for(var f=0,h=d.handlers;f<h.length;f++){var p=h[f];p(e,s)}d.handlers=[]},o=function(e,s,d){var f=function(I){return d!==void 0?d(I):console.error(I)};if(e.length===0){f(new Error("At least one script must be provided"));return}for(var h=0,p=!1,m=function(I,w){p||(w?(p=!0,f(w)):++h===e.length&&s())},b=0,y=e;b<y.length;b++){var S=y[b],E=t[S.src];if(E)E.done?m(S.src,E.error):E.handlers.push(m);else{var x=X("tiny-");t[S.src]={id:x,src:S.src,done:!1,error:null,handlers:[m]},ge(r,F({id:x},S),i)}}},a=function(){for(var e,s=0,d=Object.values(t);s<d.length;s++){var f=d[s],h=r.getElementById(f.id);h!=null&&h.tagName==="SCRIPT"&&((e=h.parentNode)===null||e===void 0||e.removeChild(h))}t={}},l=function(){return r};return{loadScripts:o,deleteScripts:a,getDocument:l}},Ce=function(){var r=[],t=function(a){var l=r.find(function(e){return e.getDocument()===a});return l===void 0&&(l=ye(a),r.push(l)),l},i=function(a,l,e,s,d){var f=function(){return t(a).loadScripts(l,s,d)};e>0?setTimeout(f,e):f()},o=function(){for(var a=r.pop();a!=null;a=r.pop())a.deleteScripts()};return{loadList:i,reinitialize:o}},be=Ce(),M=function(r){var t=r;return t&&t.tinymce?t.tinymce:null},Se=function(){var r=function(t,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])},r(t,i)};return function(t,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(t,i);function o(){this.constructor=t}t.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}}(),k=function(){return k=Object.assign||function(r){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},k.apply(this,arguments)};(function(r){Se(t,r);function t(i){var o,a,l,e=r.call(this,i)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var s=e.editor,d=e.props.value;s&&d&&d!==e.currentContent&&s.undoManager.ignore(function(){if(s.setContent(d),e.valueCursor&&(!e.inline||s.hasFocus()))try{s.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(s){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(s){(s.key==="Enter"||s.key==="Backspace"||s.key==="Delete")&&e.handleBeforeInput(s)},e.handleEditorChange=function(s){var d=e.editor;if(d&&d.initialized){var f=d.getContent();e.props.value!==void 0&&e.props.value!==f&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),f!==e.currentContent&&(e.currentContent=f,P(e.props.onEditorChange)&&e.props.onEditorChange(f,d))}},e.handleEditorChangeSpecial=function(s){(s.key==="Backspace"||s.key==="Delete")&&e.handleEditorChange(s)},e.initialise=function(s){var d,f,h;s===void 0&&(s=0);var p=e.elementRef.current;if(p){if(!me(p)){if(s===0)setTimeout(function(){return e.initialise(1)},1);else if(s<100)setTimeout(function(){return e.initialise(s+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var m=M(e.view);if(!m)throw new Error("tinymce should have been loaded into global scope");var b=k(k(k(k({},e.props.init),{selector:void 0,target:p,readonly:e.props.disabled,inline:e.inline,plugins:ve((d=e.props.init)===null||d===void 0?void 0:d.plugins,e.props.plugins),toolbar:(f=e.props.toolbar)!==null&&f!==void 0?f:(h=e.props.init)===null||h===void 0?void 0:h.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(y){e.editor=y,e.bindHandlers({}),e.inline&&!W(p)&&y.once("PostRender",function(S){y.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&P(e.props.init.setup)&&e.props.init.setup(y)},init_instance_callback:function(y){var S,E,x=e.getInitialValue();e.currentContent=(S=e.currentContent)!==null&&S!==void 0?S:y.getContent(),e.currentContent!==x&&(e.currentContent=x,y.setContent(x),y.undoManager.clear(),y.undoManager.add(),y.setDirty(!1));var I=(E=e.props.disabled)!==null&&E!==void 0?E:!1;G(e.editor,I?"readonly":"design"),e.props.init&&P(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(y)}});e.inline||(p.style.visibility=""),W(p)&&(p.value=e.getInitialValue()),m.init(b)}},e.id=e.props.id||X("tiny-react"),e.elementRef=C.createRef(),e.inline=(l=(o=e.props.inline)!==null&&o!==void 0?o:(a=e.props.init)===null||a===void 0?void 0:a.inline)!==null&&l!==void 0?l:!1,e.boundHandlers={},e}return Object.defineProperty(t.prototype,"view",{get:function(){var i,o;return(o=(i=this.elementRef.current)===null||i===void 0?void 0:i.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(i){var o=this,a,l;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(i),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==i.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var d;if(!o.inline||e.hasFocus())try{d=e.selection.getBookmark(3)}catch{}var f=o.valueCursor;if(e.setContent(o.props.value),!o.inline||e.hasFocus())for(var h=0,p=[d,f];h<p.length;h++){var m=p[h];if(m)try{e.selection.moveToBookmark(m),o.valueCursor=m;break}catch{}}})}if(this.props.disabled!==i.disabled){var s=(l=this.props.disabled)!==null&&l!==void 0?l:!1;G(this.editor,s?"readonly":"design")}}},t.prototype.componentDidMount=function(){var i=this,o,a,l,e,s;if(M(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(o=this.props).onScriptsLoadError)===null||a===void 0||a.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((l=this.elementRef.current)===null||l===void 0)&&l.ownerDocument){var d=function(){var h,p;(p=(h=i.props).onScriptsLoad)===null||p===void 0||p.call(h),i.initialise()},f=function(h){var p,m;(m=(p=i.props).onScriptsLoadError)===null||m===void 0||m.call(p,h)};be.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(s=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&s!==void 0?s:0,d,f)}},t.prototype.componentWillUnmount=function(){var i=this,o=this.editor;o&&(o.off(this.changeEvents(),this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){o.off(a,i.boundHandlers[a])}),this.boundHandlers={},o.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var i,o,a,l=(a=(o=(i=M(this.view))===null||i===void 0?void 0:i.Env)===null||o===void 0?void 0:o.browser)===null||a===void 0?void 0:a.isIE();return l?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return he()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var i=this.props.tagName,o=i===void 0?"div":i;return C.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return C.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var i,o,a=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.async,l=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:l}]:this.props.tinymceScriptSrc.map(function(f){return typeof f=="string"?{src:f,async:a,defer:l}:f});var e=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:d,async:a,defer:l}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(i){var o=this;if(this.editor!==void 0){pe(this.editor,i,this.props,this.boundHandlers,function(s){return o.props[s]});var a=function(s){return s.onEditorChange!==void 0||s.value!==void 0},l=a(i),e=a(this.props);!l&&e?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):l&&!e&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=de,t.defaultProps={cloudChannel:"7"},t})(C.Component);const Me=()=>{const r=re(),{id:t,compid:i}=ie(),[o,a]=C.useState([]),[l,e]=C.useState(""),[s,d]=C.useState(""),[f,h]=C.useState(!0),[p,m]=C.useState(0),[b,y]=C.useState(0),[S,E]=C.useState([]),[x,I]=C.useState(""),[w,q]=C.useState(""),[R,J]=C.useState("image"),[Q,Z]=C.useState(null);function Y(c){const v=new DOMParser().parseFromString(c,"text/html"),_=document.createTreeWalker(v.body,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);let g="";for(;_.nextNode();){const T=_.currentNode;T.nodeType===Node.TEXT_NODE?g+=T.nodeValue:T.nodeType===Node.ELEMENT_NODE&&(T.tagName==="BR"||T.tagName==="P"||T.tagName==="DIV"||T.tagName==="UL"||T.tagNameg=="LI")&&(g+=`
`)}return g=g.replace(/^\n+|\n+$/g,""),g=g.replace(/\n{2,}/g,`
`),g}const ee=async()=>{if(!f){let g=new FormData;g.append("title",l),g.append("companyID",p),g.append("serviceId",b),g.append("timeForService",x),g.append("chargeForService",w),g.append("serviceFile",Q),g.append("fileType",R),g.append("isTTSContent",!1);const T=D+"/KioskServiceDetail/save-service-detail";await ae(T,g),r(-1);return}let c=Y(s);const v={HTMLTranscript:s,Transcript:c,title:l,isTTSContent:f,companyID:p,serviceId:b,timeForService:x,chargeForService:w},_=D+"/KioskServiceDetail/save-tts-service-detail";await se(_,v),r(-1)},ne=async()=>{const c=D+"/KioskService/get-all-company-services/"+i,v=await A(c);E(v);let _=v==null?void 0:v.filter(g=>g.id==t);_.length&&y(_[0].id)};C.useEffect(()=>{ne()},[t,i]);const te=async()=>{const c=D+"/Company/get-companies/",v=await A(c);a(v),m(i)};C.useEffect(()=>{te()},[]);const H={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return u.jsxs(oe,{title:"Create New Service Detail",children:[u.jsxs("div",{style:{marginTop:"0.9rem"},children:[u.jsx("span",{children:"Title"}),u.jsx(N,{id:"outlined-basic",value:l,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:c=>{var v;return e((v=c==null?void 0:c.target)==null?void 0:v.value)}})]}),u.jsxs("div",{style:{marginTop:"0.9rem"},children:[u.jsx("span",{children:"Is Text To Speech Content"}),u.jsx(ce,{checked:f,onChange:()=>{h(!f)},inputProps:{"aria-label":"controlled"}})]}),f&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{marginTop:"0.9rem"},children:u.jsx("span",{children:"Transcript"})}),u.jsx(le,{value:s,onChange:d})]}),!f&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{marginTop:"0.9rem"},children:[u.jsx("span",{children:"Choose File "}),u.jsx(N,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:c=>{var v;return Z((v=c==null?void 0:c.target)==null?void 0:v.files[0])}})]}),u.jsx("div",{style:{marginTop:"0rem"},children:u.jsx(O,{sx:{m:0,minWidth:120},size:"small",children:u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[u.jsx("p",{style:{marginRight:"2rem"},children:"Content"}),u.jsxs(L,{labelId:"demo-select-small-label",id:"demo-select-small",value:R,width:"300px",placeholder:"Choose your Content",MenuProps:H,onChange:c=>{var v;return J((v=c==null?void 0:c.target)==null?void 0:v.value)},children:[u.jsx(j,{value:"",children:u.jsx("em",{children:"None"})}),u.jsx(j,{value:"image",children:"Image"}),u.jsx(j,{value:"pdf",children:"PDF"}),u.jsx(j,{values:"video",children:"Video"})]})]})})})]}),u.jsxs("div",{style:{marginTop:"0.9rem"},children:[u.jsx("span",{children:"Time For Service"}),u.jsx(N,{id:"outlined-basic",value:x,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:c=>{var v;return I((v=c==null?void 0:c.target)==null?void 0:v.value)}})]}),u.jsxs("div",{style:{marginTop:"0.9rem"},children:[u.jsx("span",{children:"Charge For Service"}),u.jsx(N,{id:"outlined-basic",value:w,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:c=>{var v;return q((v=c==null?void 0:c.target)==null?void 0:v.value)}})]}),u.jsx("div",{style:{marginTop:"0rem"},children:u.jsx(O,{sx:{m:0,minWidth:120},size:"small",children:u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[u.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),u.jsxs(L,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(p),width:"300px",placeholder:"Choose your Company",MenuProps:H,onChange:c=>{var v;m(Number((v=c==null?void 0:c.target)==null?void 0:v.value))},children:[u.jsx(j,{value:"",children:u.jsx("em",{children:"None"})}),o==null?void 0:o.map(c=>u.jsx(j,{value:c==null?void 0:c.id,children:c==null?void 0:c.name},c==null?void 0:c.id))]})]})})}),u.jsx("div",{style:{marginTop:"0rem"},children:u.jsx(O,{sx:{m:1,minWidth:120},size:"small",children:u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[u.jsx("p",{style:{marginRight:"2rem"},children:"Service"}),u.jsxs(L,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(b),width:"300px",onChange:c=>{var v;y((v=c==null?void 0:c.target)==null?void 0:v.value)},children:[u.jsx(j,{value:"",children:u.jsx("em",{children:"None"})}),S==null?void 0:S.map(c=>u.jsx(j,{value:c==null?void 0:c.id,children:c==null?void 0:c.title},c==null?void 0:c.id))]})]})})}),u.jsx("div",{style:{marginTop:"0.9rem"},children:u.jsx(ue,{variant:"contained",onClick:()=>ee(),children:"Save Changes"})})]})};export{Me as default};
