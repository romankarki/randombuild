import{f as z,h as F,i as G,k as W,l as H,m as q,o as L,n as U,s as $,q as J,t as V,v as Y,w as K,x as Q,y as X,j as e,R as C,r as d,d as M,I as Z,T as ee,F as N,z as te,e as ne,M as se}from"./index-DXOqlz8S.js";import{u as ae,S as E}from"./Select-B0zV3ojE.js";import{u as re,b as B}from"./Constants-DP-d7XJz.js";import{B as R}from"./Button-K3mHJVKx.js";import{D as oe,a as ie,b as le,c as ce}from"./DialogTitle-gM0Pyqsu.js";import{M as y}from"./MenuItem-DDRGYG7L.js";import{T as A}from"./TextField-Dwy0TTj8.js";import{T as de,a as ue,e as me,c as _,d as S,b as pe}from"./TableRow-L_Xm83yX.js";import{T as ge}from"./Tooltip-CzECRnYW.js";import{R as fe,G as he,A as xe}from"./GetValuesFromLocalStorage-DrF4OU4q.js";import{T as ve}from"./TablePagination-b35qWub_.js";import"./InputLabel-CjDmApQ-.js";function je(s,i){return()=>null}function be(s,i){return()=>null}function ye(s,i,g,c,m){return null}const Ce={configure:s=>{z.configure(s)}},Se=Object.freeze(Object.defineProperty({__proto__:null,capitalize:F,createChainedFunction:G,createSvgIcon:W,debounce:H,deprecatedPropType:je,isMuiElement:q,ownerDocument:L,ownerWindow:U,requirePropFactory:be,setRef:$,unstable_ClassNameGenerator:Ce,unstable_useEnhancedEffect:J,unstable_useId:ae,unsupportedProp:ye,useControlled:re,useEventCallback:V,useForkRef:Y,useIsFocusVisible:K},Symbol.toStringTag,{value:"Module"}));var T={},I={};const Ie=Q(Se);var k;function Te(){return k||(k=1,function(s){"use client";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=Ie}(I)),I}var we=X;Object.defineProperty(T,"__esModule",{value:!0});var O=T.default=void 0,Pe=we(Te()),Ne=e;O=T.default=(0,Pe.default)((0,Ne.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Ee=te(ce)(({theme:s})=>({"& .MuiDialogContent-root":{padding:s.spacing(2)},"& .MuiDialogActions-root":{padding:s.spacing(1)}}));function Re(){const[s,i]=C.useState(!1),[g,c]=d.useState(0),[m,v]=d.useState([]),[j,b]=d.useState(null),[f,r]=d.useState([]),o=M(),p=()=>{o("/add/services")},n=()=>{i(!1)},h={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},u=()=>{};return e.jsxs(C.Fragment,{children:[e.jsx(R,{variant:"contained",onClick:p,children:"Add New Service Department"}),e.jsxs(Ee,{onClose:n,"aria-labelledby":"customized-dialog-title",open:s,children:[e.jsx(oe,{sx:{m:0,p:2},id:"customized-dialog-title",color:"blue",children:"Create New Service"}),e.jsx(Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:t=>t.palette.grey[500]},children:e.jsx(O,{})}),e.jsxs(ie,{dividers:!0,children:[e.jsx(ee,{gutterBottom:!0,style:{fontSize:"0.7rem",width:"700px"},children:"Fill the form to create a new service. Note all fields are mandatory."}),e.jsx("br",{}),e.jsx("div",{style:{marginTop:"0rem"},children:e.jsx(N,{sx:{m:0,minWidth:120},size:"small",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),e.jsxs(E,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(g),width:"300px",placeholder:"Choose your Company",MenuProps:h,onChange:t=>{var x,w,P;c(Number((x=t==null?void 0:t.target)==null?void 0:x.value)),fetchBranch((w=t==null?void 0:t.target)==null?void 0:w.value),fetchEmployees((P=t==null?void 0:t.target)==null?void 0:P.value)},children:[e.jsx(y,{value:"",children:e.jsx("em",{children:"None"})}),m==null?void 0:m.map(t=>e.jsx(y,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id))]})]})})}),e.jsx("div",{style:{marginTop:"0rem"},children:e.jsx(N,{sx:{m:0,minWidth:120},size:"small",children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx("p",{style:{marginRight:"2rem"},children:"Branch"}),e.jsxs(E,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(j),width:"300px",placeholder:"Choose your Company",MenuProps:h,onChange:t=>{var x;b((x=t==null?void 0:t.target)==null?void 0:x.value)},children:[e.jsx(y,{value:"",children:e.jsx("em",{children:"None"})}),f==null?void 0:f.map(t=>e.jsx(y,{value:t==null?void 0:t.id,children:t==null?void 0:t.title},t==null?void 0:t.id))]})]})})}),e.jsx("br",{}),e.jsx(A,{id:"filled-multiline-static",label:"Service Title",multiline:!0,fullWidth:!0,rows:4,placeholder:"Your Service Name here ..."}),e.jsx("br",{})]}),e.jsx(le,{children:e.jsx(R,{variant:"contained",autoFocus:!0,onClick:u(),children:"Add Service"})})]})]})}const D=[{id:"id",label:"Id",minWidth:170},{id:"departmentName",label:"Service Department",minWidth:100},{id:"companyName",label:"Company Name",minWidth:170},{id:"action",label:"Action",minWidth:170,align:"center"}],_e=({companyId:s})=>{const[i,g]=d.useState(0),[c,m]=d.useState(10),[v,j]=d.useState([]),b=M();async function f(){const n=sessionStorage.getItem("user")||{},a=JSON.parse(n),l=(a==null?void 0:a.token)||"",u=B+"/KioskService/get-all-company-department/"+s,t=await fetch(u,{method:"GET",headers:{Authorization:"Bearer "+l}});t.ok||alert("someting went wrong");const x=await t.json();j(x)}d.useEffect(()=>{f()},[s]);const r=(n,a)=>{g(a)},o=n=>{m(+n.target.value),g(0)},p=(n,a)=>{console.log("currently selected item is ....",n),b("/edit/services/"+n.id+"/"+s)};return e.jsxs(ne,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(de,{sx:{maxHeight:440},children:e.jsxs(ue,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(me,{children:e.jsx(_,{children:D.map(n=>e.jsx(S,{align:n.align,style:{minWidth:n.minWidth},children:n.label},n.id))})}),e.jsx(pe,{children:v.slice(i*c,i*c+c).map(n=>e.jsx(_,{hover:!0,role:"checkbox",tabIndex:-1,children:D.map(a=>{if(a.id=="action")return e.jsx(S,{align:a.align,children:e.jsx(ge,{title:"Edit Service",arrow:!0,children:e.jsx(fe,{onClick:()=>p(n)})})},a.id);const l=n[a.id];return e.jsx(S,{align:a.align,children:a.format&&typeof l=="number"?a.format(l):l},a.id)})},n.id))})]})}),e.jsx(ve,{rowsPerPageOptions:[10,25,100],component:"div",count:v.length,rowsPerPage:c,page:i,onPageChange:r,onRowsPerPageChange:o})]})},ke=_e;function Ue(){const[s,i]=C.useState([]),[g,c]=d.useState(""),[m,v]=d.useState(1),j=(r,o)=>{c(o);let p=s==null?void 0:s.filter(n=>n.name==o)[0];p&&v(p.id)};async function b(){const r=sessionStorage.getItem("user")||{},o=JSON.parse(r),p=(o==null?void 0:o.token)||"",n=B+"/Company/get-companies",a=await fetch(n,{method:"GET",headers:{Authorization:"Bearer "+p}});a.ok||alert("someting went wrong");const l=await a.json();i(l);let h=l==null?void 0:l.filter(t=>t.id==o.companyId),u=(h==null?void 0:h.pop())||null;u&&(c(u.name),v(u==null?void 0:u.id))}C.useEffect(()=>{b()},[]);const f=he();return e.jsxs(se,{title:"Manage Your Service Department",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[e.jsx(Re,{}),f.toLowerCase()==="superadmin"?e.jsx(xe,{inputValue:g,onInputChange:(r,o)=>j(r,o),sx:{width:"400px"},id:"disable-close-on-select",options:s.map(r=>r.name),getOptionLabel:r=>r,renderInput:r=>e.jsx(A,{...r,variant:"standard"})}):null]}),e.jsx(ke,{companyId:m})]})}export{Ue as default};
