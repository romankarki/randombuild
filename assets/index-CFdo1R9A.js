import{d as V,a1 as q,r as s,j as n,M as J,U as L}from"./index-BTRZstNR.js";import{b as K,h as X,a as M}from"./apiClient-BLOXFteY.js";import{N as h,b as c}from"./Constants-BUFMHqTz.js";import{R as Y}from"./index-B8y9y9tp.js";import{T as R}from"./TextField-GCBK3T6O.js";import{S as U}from"./Select-Xs8P-wOv.js";import{M as i}from"./MenuItem-BkcVvT_A.js";import{B as _}from"./Button-CrGA_dfM.js";import"./InputLabel-XzrnmkSq.js";const de=()=>{const x=V(),{id:r}=q(),[m,A]=s.useState([]),[u,g]=s.useState(""),[y,f]=s.useState(0),[j,d]=s.useState("image"),[G,H]=s.useState(null),[W,p]=s.useState(""),[v,C]=s.useState(""),B=async()=>{let t=new FormData;t.append("id",r),t.append("text",u),t.append("fileType",j),t.append("companyId",y),t.append("file",G),t.append("description",v);const e=c+"/NewsAndNotice/save-news-notice";await K(e,t),x(-1)},z=async()=>{var t=confirm("are you sure you want to permanently delete this record");if(!t)return;const e=c+"/NewsAndNotice/delete-news-notice/"+r;await X(e,{}),x(-1)},O=async()=>{const t=c+"/Company/get-companies/",e=await M(t);A(e)},Q=async()=>{var a,I,w,N,b,S,D,P,k,E,F;const t=c+"/NewsAndNotice/get-news-notice/"+r,e=await M(t);if(g(e.text),C(e.description),f(e.companyId),((a=e==null?void 0:e.docLink)==null?void 0:a.length)>1){const o=(N=(w=(I=e==null?void 0:e.docLink)==null?void 0:I.split("/"))==null?void 0:w.pop())==null?void 0:N.toString(),l=h+(e==null?void 0:e.companyId)+"/"+o;p(l),d("pdf")}else if(((b=e==null?void 0:e.imageLink)==null?void 0:b.length)>1){const o=(P=(D=(S=e==null?void 0:e.imageLink)==null?void 0:S.split("/"))==null?void 0:D.pop())==null?void 0:P.toString(),l=h+(e==null?void 0:e.companyId)+"/"+o;p(l),d("image")}else{const o=(F=(E=(k=e==null?void 0:e.videoLink)==null?void 0:k.split("/"))==null?void 0:E.pop())==null?void 0:F.toString(),l=h+(e==null?void 0:e.companyId)+"/"+o;p(l),d("video")}};s.useEffect(()=>{O()},[]),s.useEffect(()=>{Q()},[r]);const T={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return n.jsxs(J,{title:"Add Record To News & Notice",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Title"}),n.jsx(R,{id:"outlined-basic",value:u,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return g((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Description"}),n.jsx(Y,{style:{height:"150px"},value:v,onChange:C}),n.jsx("br",{}),n.jsx("br",{})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Choose File "}),n.jsx("span",{style:{width:"2rem"},children:"      "}),n.jsx("a",{href:W,target:"_blank",children:"Uploaded File"}),n.jsx(R,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return H((e=t==null?void 0:t.target)==null?void 0:e.files[0])}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(L,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Content"}),n.jsxs(U,{labelId:"demo-select-small-label",id:"demo-select-small",value:j,width:"300px",placeholder:"Choose your Content",MenuProps:T,onChange:t=>{var e;return d((e=t==null?void 0:t.target)==null?void 0:e.value)},children:[n.jsx(i,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(i,{value:"image",children:"Image"}),n.jsx(i,{value:"pdf",children:"PDF"}),n.jsx(i,{values:"video",children:"Video"})]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(L,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),n.jsxs(U,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(y),width:"300px",placeholder:"Choose your Company",MenuProps:T,onChange:t=>{var e,a;f(Number((e=t==null?void 0:t.target)==null?void 0:e.value)),fetchBranch((a=t==null?void 0:t.target)==null?void 0:a.value)},children:[n.jsx(i,{value:"",children:n.jsx("em",{children:"None"})}),m==null?void 0:m.map(t=>n.jsx(i,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id))]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(_,{variant:"contained",onClick:()=>B(),children:"Save Changes"}),n.jsx(_,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{z()},children:"Delete"})]})]})};export{de as default};
