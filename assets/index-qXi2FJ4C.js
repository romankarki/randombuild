import{r as a,$ as ee,_ as te,j as t,I as ie,T as oe,R as N,d as ne,M as se}from"./index-_AWSBuUU.js";import"./EmployeeTable-CkHZvKUl.js";import{D as g,b as D}from"./Constants-DGXMJ-DT.js";import{G as ae,A as le}from"./GetValuesFromLocalStorage-idXzu9Sl.js";import{a as _,b as R}from"./apiClient-BdZFA0eS.js";import{b as re,D as de,a as pe}from"./DialogContent-DNILg5Bm.js";import{D as ce}from"./DialogTitle-CKUk5_Mt.js";import{B as T}from"./Button-CJj7kHSd.js";import{T as r}from"./TextField-BObO4OcV.js";import"./TableRow-DhcXuOZB.js";import"./TablePagination-BxifiRkg.js";import"./Select-eC4K4ZSx.js";import"./MenuItem-CallC8N8.js";import"./InputLabel-B7cXIkNh.js";var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},me=function(d,o){return a.createElement(ee,te({},d,{ref:o,icon:ue}))},ge=a.forwardRef(me);const fe=({imageList:s,universal_link:d,onDelete:o})=>{const[p,v]=a.useState(!1),[j,S]=a.useState(null),[L,b]=a.useState(""),C=(n,c)=>{S(n),b(c),v(!0)},u=()=>{v(!1)},l=()=>{j&&o(j),u()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",padding:"16px"},children:s==null?void 0:s.map(n=>t.jsxs("div",{style:{position:"relative",display:"inline-block",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:[t.jsx("a",{href:d+(n==null?void 0:n.imageLink),target:"_blank",rel:"noopener noreferrer",children:t.jsx("img",{src:d+(n==null?void 0:n.imageLink),alt:`Uploaded ${n==null?void 0:n.id}`,style:{display:"block",width:"100%",height:"250px",objectFit:"cover"}})}),t.jsx(ie,{sx:{position:"absolute",top:"8px",right:"8px",background:"rgba(255, 255, 255, 0.8)",borderRadius:"50%",cursor:"pointer",padding:"8px",transition:"background 0.3s ease","&:hover":{background:"rgba(255, 0, 0, 0.2)"}},onClick:()=>C(n==null?void 0:n.id,d+(n==null?void 0:n.imageLink)),"aria-label":"Delete",children:t.jsx(ge,{style:{color:"#ff4d4d",fontSize:"16px"}})})]},n==null?void 0:n.id))}),t.jsxs(re,{open:p,onClose:u,fullWidth:!0,maxWidth:"sm",sx:{"& .MuiDialogTitle-root":{backgroundColor:"#f44336",color:"#fff"}},children:[t.jsx(ce,{children:"Confirm Delete"}),t.jsxs(de,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[L&&t.jsx("img",{src:L,alt:"Preview",style:{width:"100%",height:"400px",objectFit:"cover",borderRadius:"8px",marginBottom:"16px"}}),t.jsx(oe,{variant:"body1",children:"Are you sure you want to permanently delete this image?"})]}),t.jsxs(pe,{sx:{"& .MuiButton-root":{color:"#fff"},"& .MuiButton-contained":{backgroundColor:"#f44336","&:hover":{backgroundColor:"#c62828"}},"& .MuiButton-outlined":{borderColor:"#2196f3",color:"#2196f3","&:hover":{backgroundColor:"#e3f2fd"}}},children:[t.jsx(T,{onClick:u,color:"primary",variant:"outlined",children:"Cancel"}),t.jsx(T,{onClick:l,color:"secondary",variant:"contained",children:"Delete"})]})]})]})},he=({companyId:s,setIsAddDisabled:d})=>{const[o,p]=a.useState(null);a.useState({});const[v,j]=a.useState(""),[S,L]=a.useState(""),[b,C]=a.useState(null),[u,l]=a.useState(null),[n,c]=a.useState(null),[k,w]=a.useState(null),[f,I]=a.useState(null),[m,F]=a.useState(null),[W,ve]=a.useState(null),[J,A]=a.useState([]),B=async()=>{var y,h,x,U,M,E,O,V,P,z,G,H,$,K;let e=D+"/Dashboard/get-dashboard-info/"+s,i=await _(e);i&&(i.imageLink1&&(i.imageLink1=g+s+"/"+((h=(y=i.imageLink1)==null?void 0:y.split("/"))==null?void 0:h.pop())),i.imageLink2&&(i.imageLink2=g+s+"/"+((U=(x=i.imageLink2)==null?void 0:x.split("/"))==null?void 0:U.pop())),i.imageLink3&&(i.imageLink1=g+s+"/"+((E=(M=i.imageLink3)==null?void 0:M.split("/"))==null?void 0:E.pop())),i.videoLink1&&(i.videoLink1=g+s+"/"+((V=(O=i.videoLink1)==null?void 0:O.split("/"))==null?void 0:V.pop())),i.videoLink2&&(i.videoLink2=g+s+"/"+((z=(P=i.videoLink2)==null?void 0:P.split("/"))==null?void 0:z.pop())),i.docLink1&&(i.docLink1=g+s+"/"+((H=(G=i.docLink1)==null?void 0:G.split("/"))==null?void 0:H.pop())),i.docLink2&&(i.docLink2=g+s+"/"+((K=($=i.docLink2)==null?void 0:$.split("/"))==null?void 0:K.pop()))),p(i),console.log("this is dashboard link",i),d(!!i),await Q()},q=g+s+"/",Q=async()=>{const e=D+"/Dashboard/get-dashboard-image/"+s;let i=await _(e);i.map(y=>{var h,x;y.imageLink=(x=(h=y.imageLink)==null?void 0:h.split("/"))==null?void 0:x.pop()}),A(i)};a.useEffect(()=>{B()},[s]);const X=async()=>{const e=new FormData;e.append("Id",o==null?void 0:o.id),e.append("Title",o==null?void 0:o.title),e.append("CompanyId",s),e.append("Description",o==null?void 0:o.description),e.append("Image1",b),e.append("Image2",u),e.append("Image3",n),e.append("Video1",k),e.append("Video2",f),e.append("Doc1",m),e.append("Doc2",W);const i=D+"/Dashboard/save-dashboard-info";await R(i,e),alert("Successfully saved your Changes"),B()},Y=async()=>{const e=new FormData;e.append("Title",v),e.append("Description",S),e.append("CompanyId",s),e.append("Image1",b),e.append("Image2",u),e.append("Image3",n),e.append("Video1",k),e.append("Video2",f),e.append("Doc1",m),e.append("Doc2",W);const i=D+"/Dashboard/save-dashboard-info";await R(i,e),alert("Successfully added your Changes"),B()},Z=async e=>{const i=D+"/Dashboard/delete-dashboard-image/"+e;await R(i,{})!=null&&A(h=>h.filter(x=>x.id!==e))};return t.jsxs(t.Fragment,{children:[!o&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("p",{children:"Adding a new Dashboard data"}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(r,{id:"outlined-basic",value:o==null?void 0:o.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return p({...o,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(r,{id:"outlined-basic",value:o==null?void 0:o.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return p({...o,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return C((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return l((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(T,{variant:"contained",onClick:()=>Y(),children:"Save Changes"})})]})}),!!o&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(r,{id:"outlined-basic",value:o==null?void 0:o.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return p({...o,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(r,{id:"outlined-basic",value:o==null?void 0:o.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return p({...o,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return C((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return l((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(r,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(T,{variant:"contained",onClick:()=>X(),children:"Save Changes"})}),t.jsx("br",{}),t.jsx("br",{}),t.jsx("h3",{children:"Uploaded Images here"}),t.jsx(fe,{imageList:J,universal_link:q,onDelete:Z})]})})]})},xe=he;function We(){const[s,d]=N.useState([]),[o,p]=a.useState(""),[v,j]=a.useState(1),[S,L]=a.useState(!1),b=(l,n)=>{p(n);let c=s==null?void 0:s.filter(k=>k.name==n)[0];c&&j(c.id)};async function C(){const l=sessionStorage.getItem("user")||{},n=JSON.parse(l),c=(n==null?void 0:n.token)||"",k=D+"/Company/get-companies",w=await fetch(k,{method:"GET",headers:{Authorization:"Bearer "+c}});w.ok||alert("someting went wrong");const f=await w.json();d(f);let I=f==null?void 0:f.filter(F=>F.id==n.companyId),m=(I==null?void 0:I.pop())||null;m&&(p(m.name),j(m==null?void 0:m.id))}N.useEffect(()=>{C()},[]),ne();const u=ae();return a.useEffect(()=>{},[o]),t.jsxs(se,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[t.jsx("p",{}),u.toLowerCase()==="superadmin"?t.jsx(le,{inputValue:o,onInputChange:(l,n)=>b(l,n),sx:{width:"400px"},id:"disable-close-on-select",options:s.map(l=>l.name),getOptionLabel:l=>l,renderInput:l=>(l.inputProps.value||(l.inputProps.value="Admin"),t.jsx(r,{...l,placeholder:"Showing Default Company",variant:"standard"}))}):null]}),t.jsx(xe,{companyId:v,setIsAddDisabled:L})]})}export{We as default};
