import{r as s,j as t,R as q,d as oe,M as se}from"./index-DTwxqu1t.js";import"./EmployeeTable-CabbcMbB.js";import{D as u,b as v}from"./Constants-Aq5C2dlb.js";import{G as ae,A as le}from"./GetValuesFromLocalStorage-DjeFguS9.js";import{a as H,b as Q}from"./apiClient-BdZFA0eS.js";import{T as l}from"./TextField-BrIKXlBB.js";import{B as X}from"./Button-DsFXmZBL.js";import"./TableRow-BDZ5NjWB.js";import"./TablePagination-Bx9oX9wD.js";import"./Select-Cg_d5LfK.js";import"./MenuItem-C1BekbPD.js";import"./InputLabel-B5_iZlRn.js";const re=({companyId:o,setIsAddDisabled:C})=>{var V,A,R,E;const[n,d]=s.useState(null);s.useState({});const[S,T]=s.useState(""),[W,D]=s.useState(""),[k,b]=s.useState(null),[y,a]=s.useState(null),[r,c]=s.useState(null),[f,L]=s.useState(null),[m,g]=s.useState(null),[p,w]=s.useState(null),[F,Y]=s.useState(null),[B,Z]=s.useState([]),I=async()=>{var h,x,j,U,P,_,G,K,N,M,O,z,J,$;let e=v+"/Dashboard/get-dashboard-info/"+o,i=await H(e);i&&(i.imageLink1&&(i.imageLink1=u+o+"/"+((x=(h=i.imageLink1)==null?void 0:h.split("/"))==null?void 0:x.pop())),i.imageLink2&&(i.imageLink2=u+o+"/"+((U=(j=i.imageLink2)==null?void 0:j.split("/"))==null?void 0:U.pop())),i.imageLink3&&(i.imageLink1=u+o+"/"+((_=(P=i.imageLink3)==null?void 0:P.split("/"))==null?void 0:_.pop())),i.videoLink1&&(i.videoLink1=u+o+"/"+((K=(G=i.videoLink1)==null?void 0:G.split("/"))==null?void 0:K.pop())),i.videoLink2&&(i.videoLink2=u+o+"/"+((M=(N=i.videoLink2)==null?void 0:N.split("/"))==null?void 0:M.pop())),i.docLink1&&(i.docLink1=u+o+"/"+((z=(O=i.docLink1)==null?void 0:O.split("/"))==null?void 0:z.pop())),i.docLink2&&(i.docLink2=u+o+"/"+(($=(J=i.docLink2)==null?void 0:J.split("/"))==null?void 0:$.pop()))),d(i),console.log("this is dashboard link",i),C(!!i),await ie()},ee=u+o+"/",ie=async()=>{const e=v+"/Dashboard/get-dashboard-image/"+o;let i=await H(e);i.map(h=>{var x,j;h.imageLink=(j=(x=h.imageLink)==null?void 0:x.split("/"))==null?void 0:j.pop()}),Z(i)};s.useEffect(()=>{I()},[o]);const te=async()=>{const e=new FormData;e.append("Id",n==null?void 0:n.id),e.append("Title",n==null?void 0:n.title),e.append("CompanyId",o),e.append("Description",n==null?void 0:n.description),e.append("Image1",k),e.append("Image2",y),e.append("Image3",r),e.append("Video1",f),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",F);const i=v+"/Dashboard/save-dashboard-info";await Q(i,e),alert("Successfully saved your Changes"),I()},ne=async()=>{const e=new FormData;e.append("Title",S),e.append("Description",W),e.append("CompanyId",o),e.append("Image1",k),e.append("Image2",y),e.append("Image3",r),e.append("Video1",f),e.append("Video2",m),e.append("Doc1",p),e.append("Doc2",F);const i=v+"/Dashboard/save-dashboard-info";await Q(i,e),alert("Successfully added your Changes"),I()};return t.jsxs(t.Fragment,{children:[!n&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsx("p",{children:"Adding a new Dashboard data"}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(l,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(l,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return b((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return a((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(X,{variant:"contained",onClick:()=>ne(),children:"Save Changes"})})]})}),!!n&&t.jsx(t.Fragment,{children:t.jsxs("div",{children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Dashboard Title"}),t.jsx(l,{id:"outlined-basic",value:n==null?void 0:n.title,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,title:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Description"}),t.jsx(l,{id:"outlined-basic",value:n==null?void 0:n.description,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return d({...n,description:(i=e==null?void 0:e.target)==null?void 0:i.value})}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 1 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return b((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 2 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return a((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Image 3 (optional)"}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return c((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 1 (optional)"}),((V=n==null?void 0:n.videoLink1)==null?void 0:V.length)>1&&t.jsx("p",{children:t.jsx("a",{_target:"blank",href:n.videoLink1,children:"view current file"})}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return L((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Video 2 (optional)"}),((A=n==null?void 0:n.videoLink2)==null?void 0:A.length)>1&&t.jsxs("p",{children:[" ",t.jsx("a",{target:"_blank",href:n.videoLink2,children:"show current file"})]}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return g((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 1 (optional)"}),((R=n==null?void 0:n.docLink1)==null?void 0:R.length)>1&&t.jsx("p",{children:t.jsx("a",{target:"_blank",href:n.docLink1,children:"show current file"})}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return w((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Document 2 (optional)"}),((E=n==null?void 0:n.docLink2)==null?void 0:E.length)>1&&t.jsx("p",{children:t.jsx("a",{target:"_blank",href:n.docLink2,children:"show current file"})}),t.jsx(l,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var i;return Y((i=e==null?void 0:e.target)==null?void 0:i.files[0])}})]}),t.jsx("p",{children:"Upload Images here"}),B==null?void 0:B.map(e=>t.jsx(t.Fragment,{children:t.jsx("div",{children:t.jsx("a",{href:ee+(e==null?void 0:e.imageLink),children:"Uploaded Image"})},e==null?void 0:e.id)})),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(X,{variant:"contained",onClick:()=>te(),children:"Save Changes"})})]})})]})},de=re;function be(){const[o,C]=q.useState([]),[n,d]=s.useState(""),[S,T]=s.useState(1),[W,D]=s.useState(!1),k=(a,r)=>{d(r);let c=o==null?void 0:o.filter(f=>f.name==r)[0];c&&T(c.id)};async function b(){const a=sessionStorage.getItem("user")||{},r=JSON.parse(a),c=(r==null?void 0:r.token)||"",f=v+"/Company/get-companies",L=await fetch(f,{method:"GET",headers:{Authorization:"Bearer "+c}});L.ok||alert("someting went wrong");const m=await L.json();C(m);let g=m==null?void 0:m.filter(w=>w.id==r.companyId),p=(g==null?void 0:g.pop())||null;p&&(d(p.name),T(p==null?void 0:p.id))}q.useEffect(()=>{b()},[]),oe();const y=ae();return s.useEffect(()=>{},[n]),t.jsxs(se,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.3rem"},children:[t.jsx("p",{}),y.toLowerCase()==="superadmin"?t.jsx(le,{inputValue:n,onInputChange:(a,r)=>k(a,r),sx:{width:"400px"},id:"disable-close-on-select",options:o.map(a=>a.name),getOptionLabel:a=>a,renderInput:a=>(a.inputProps.value||(a.inputProps.value="Admin"),t.jsx(l,{...a,placeholder:"Showing Default Company",variant:"standard"}))}):null]}),t.jsx(de,{companyId:S,setIsAddDisabled:D})]})}export{be as default};
