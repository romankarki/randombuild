import{d as M,a1 as P,r,j as s,M as h,U as B}from"./index-BRiPDprX.js";import{h as g,a as u}from"./apiClient-BdZFA0eS.js";import{b as i}from"./Constants-C3A6Gqx3.js";import{T as _}from"./TextField-B9RgCfUw.js";import{S as k}from"./Select-B1tC3DLq.js";import{M as p}from"./MenuItem-B0v1FVPj.js";import{B as j}from"./Button-CgWm9gs8.js";import"./InputLabel-BGqQE_mf.js";const q=()=>{const c=M();let{id:l,compid:y}=P();r.useState(!1);const[o,f]=r.useState(""),[m,v]=r.useState(0),[d,S]=r.useState([]);r.useState(null);const[G,C]=r.useState([]),T=async()=>{if(!x())return;let t={id:l,departmentName:o,companyId:m};const n=i+"/KioskService/save-company-service-department";await g(n,t),c(-1)},I=async()=>{if(!x())return;let t={id:l,departmentName:o,companyId:m,isDeleted:!0};var n=confirm("are you sure you want to permanently delete this record");if(!n)return;const w=i+"/KioskService/save-company-service-department";await g(w,t),c(-1)},x=()=>{let e=[];m||e.push("Company is mandatory"),o==""&&e.push("Department Name is required");let t=e.join(`
`);return e.length>0?(alert(t),!1):!0},E=async()=>{const e=i+"/Company/get-companies/",t=await u(e);S(t)},b=async e=>{const t=i+"/Branch/get-all-branches-for-company/"+e;let n=await u(t);C(n)};r.useEffect(()=>{E()},[]);const D=async()=>{await b(y);const e=i+"/KioskService/get-company-service-department/"+l;let t=await u(e);v(t.companyId),f(t.departmentName)};r.useEffect(()=>{D()},[l,y]);const N={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},a=JSON.parse(sessionStorage.getItem("user"));return s.jsxs(h,{title:"Creating new Employee",children:[s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx("span",{children:"Service Title"}),s.jsx(_,{id:"outlined-basic",value:o,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var t;return f((t=e==null?void 0:e.target)==null?void 0:t.value)}})]}),s.jsx("div",{style:{marginTop:"0rem"},children:s.jsx(B,{sx:{m:0,minWidth:120},size:"small",children:s.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[s.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),s.jsxs(k,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(m),width:"300px",placeholder:"Choose your Company",MenuProps:N,onChange:e=>{var t;v(Number((t=e==null?void 0:e.target)==null?void 0:t.value))},children:[s.jsx(p,{value:"",children:s.jsx("em",{children:"None"})}),d==null?void 0:d.map(e=>(a==null?void 0:a.role)==="superadmin"?s.jsx(p,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(a==null?void 0:a.companyId)?s.jsx(p,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),s.jsx("br",{}),s.jsxs("div",{style:{marginTop:"0.9rem"},children:[s.jsx(j,{variant:"contained",onClick:()=>T(),children:"Save Changes"}),s.jsx(j,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{I()},children:"Delete"})]})]})};export{q as default};
