import{d as $,Z as ee,r as a,j as n,M as te,W as T}from"./index-ZDD_OGMu.js";import{b as k,a as P}from"./apiClient-OPmdi5JO.js";import{c as ne,b as d}from"./Constants-Ctlr_h4s.js";import{T as s}from"./TextField-D33VU5iS.js";import{S}from"./Select-CIif3pin.js";import{M as o}from"./MenuItem-C9iTeXka.js";import{S as ae}from"./Switch-B809M7HV.js";import{B as z}from"./Button-BJQZiDvD.js";import"./InputLabel-Dw3maVgU.js";import"./SwitchBase-CpVo7noB.js";const xe=()=>{const D=$();let{id:m}=ee();const[O,le]=a.useState(!1),[p,w]=a.useState(""),[u,y]=a.useState("bod"),[r,N]=a.useState(0),[h,W]=a.useState(0),[g,B]=a.useState(0),[x,M]=a.useState("male"),[L,A]=a.useState(null),[c,G]=a.useState(""),[f,R]=a.useState(""),[v,j]=a.useState(""),[b,F]=a.useState(0),[_,H]=a.useState(""),[C,Z]=a.useState([]),[E,q]=a.useState([]),J=async()=>{if(!U())return;let e=new FormData;if(e.append("Id",m),e.append("CompanyId",r),e.append("EmployeeName",p),e.append("EmployeeType",u=="bod"?1:2),e.append("Level",h),e.append("Priority",g),e.append("Gender",x),e.append("Photo",L),e.append("Phonenumber",c),e.append("Email",f),e.append("Designation",v),e.append("BranchId",b),O){e.append("IsDeleted",!0);var l=confirm("are you sure you want to permanently delete this record");if(!l)return}const i=d+"/Employee/save-employee-record";await k(i,e),D(-1)},K=async()=>{if(!U())return;let e=new FormData;e.append("Id",m),e.append("CompanyId",r),e.append("EmployeeName",p),e.append("EmployeeType",u=="bod"?1:2),e.append("Level",h),e.append("Priority",g),e.append("Gender",x),e.append("Photo",L),e.append("Phonenumber",c),e.append("Email",f),e.append("Designation",v),e.append("BranchId",b),e.append("IsDeleted",!0);var l=confirm("are you sure you want to permanently delete this record");if(!l)return;const i=d+"/Employee/save-employee-record";await k(i,e),D(-1)},U=()=>{console.log("companydid",r);let t=[];r||t.push("Company is mandatory"),p==""&&t.push("Employee Name is mandatory"),c==""&&t.push("Phonenumber is mandatory");let e=t.join(`
`);return t.length>0?(alert(e),!1):!0},Q=async()=>{const t=d+"/Company/get-companies/",e=await P(t);Z(e)},V=async t=>{const e=d+"/Branch/get-all-branches-for-company/"+t;let l=await P(e);q(l)};a.useEffect(()=>{Q()},[]);const X=async()=>{var l;const t=d+"/Employee/get-employee-by-id/"+m;let e=await P(t);console.log("all the results are here",e),w(e.employeeName),j(e.designation),y((l=e.employeeType)==null?void 0:l.toLowerCase()),G(e.phonenumber),R(e.email),j(e.designation),M(e.gender),N(e.companyId),V(e.companyId),F(e.branchId),B(e.priority),W(Number(e.level)),setTimeout(()=>{let i=e.photo.split("\\"),Y=ne+e.companyId+"/"+i.pop();H(Y)},500)};a.useEffect(()=>{X()},[m]);const I={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}};return n.jsxs(te,{title:"Creating new Employee",children:[n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Name"}),n.jsx(s,{id:"outlined-basic",value:p,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return w((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Level"}),n.jsx(s,{id:"outlined-basic",value:h,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return W((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Priority"}),n.jsx(s,{id:"outlined-basic",value:g,variant:"outlined",type:"number",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return B((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Photo"}),n.jsx("div",{children:_&&n.jsx("img",{src:_,alt:"employeeimage",width:"300",height:"200"})}),n.jsx(s,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:t=>{var e;A((e=t==null?void 0:t.target)==null?void 0:e.files[0]),H(null)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Designation"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:v,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return j((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Email"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:f,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return R((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Phonenumber"}),n.jsx(s,{id:"outlined-basic",variant:"outlined",value:c,autoComplete:"off",fullWidth:!0,onChange:t=>{var e;return G((e=t==null?void 0:t.target)==null?void 0:e.value)}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(T,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Gender"}),n.jsxs(S,{labelId:"demo-select-small-label",id:"demo-select-small",value:x,width:"300px",placeholder:"Choose your Company",MenuProps:I,onChange:t=>{var e;return M((e=t==null?void 0:t.target)==null?void 0:e.value)},children:[n.jsx(o,{value:"",children:n.jsx("em",{children:"None"})}),n.jsx(o,{value:"male",children:"Male"}),n.jsx(o,{value:"female",children:"Female"})]})]})})}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx("span",{children:"Employee Type "}),n.jsx("span",{style:{fontWeight:"bold",marginLeft:"2rem"},children:"Is BOD"}),n.jsx(ae,{checked:u=="bod",onChange:()=>{u=="bod"?y("nbod"):y("bod")},inputProps:{"aria-label":"controlled"}})]}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(T,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Company"}),n.jsxs(S,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(r),width:"300px",placeholder:"Choose your Company",MenuProps:I,onChange:t=>{var e,l;N(Number((e=t==null?void 0:t.target)==null?void 0:e.value)),V((l=t==null?void 0:t.target)==null?void 0:l.value)},children:[n.jsx(o,{value:"",children:n.jsx("em",{children:"None"})}),C==null?void 0:C.map(t=>n.jsx(o,{value:t==null?void 0:t.id,children:t==null?void 0:t.name},t==null?void 0:t.id))]})]})})}),n.jsx("div",{style:{marginTop:"0rem"},children:n.jsx(T,{sx:{m:0,minWidth:120},size:"small",children:n.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[n.jsx("p",{style:{marginRight:"2rem"},children:"Employee Branch"}),n.jsxs(S,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(b),width:"300px",placeholder:"Choose your Company",MenuProps:I,onChange:t=>{var e;return F((e=t==null?void 0:t.target)==null?void 0:e.value)},children:[n.jsx(o,{value:"",children:n.jsx("em",{children:"None"})}),E==null?void 0:E.map(t=>n.jsx(o,{value:t==null?void 0:t.id,children:t==null?void 0:t.title},t==null?void 0:t.id))]})]})})}),n.jsx("br",{}),n.jsxs("div",{style:{marginTop:"0.9rem"},children:[n.jsx(z,{variant:"contained",onClick:()=>J(),children:"Save Changes"}),n.jsx(z,{color:"error",style:{marginLeft:"2rem"},variant:"contained",onClick:()=>{K()},children:"Delete"})]})]})};export{xe as default};
