import{d as Q,Z,r as n,j as t,M as $,F as u}from"./index-_AWSBuUU.js";import{b as W,a as f}from"./apiClient-BdZFA0eS.js";import{b as m}from"./Constants-DGXMJ-DT.js";import{R as q}from"./index-C6nOnK4e.js";import{T as p}from"./TextField-BObO4OcV.js";import{S as Y}from"./Switch-Bb3rIjd5.js";import{S as x}from"./Select-eC4K4ZSx.js";import{M as i}from"./MenuItem-CallC8N8.js";import{B as ee}from"./Button-CJj7kHSd.js";import"./InputLabel-B7cXIkNh.js";import"./SwitchBase-oREcUv6T.js";const xe=()=>{const T=Q(),{compid:c}=Z(),[g,R]=n.useState([]),[C,_]=n.useState(""),[v,H]=n.useState(""),[d,B]=n.useState(!0),[S,I]=n.useState(0),[N,O]=n.useState(0),[j,k]=n.useState([]),[b,L]=n.useState(""),[F,G]=n.useState(""),[E,z]=n.useState("image"),[D,w]=n.useState(null),[P,A]=n.useState(0),[h,K]=n.useState([]);function V(e){const s=new DOMParser().parseFromString(e,"text/html"),r=document.createTreeWalker(s.body,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);let l="";for(;r.nextNode();){const a=r.currentNode;a.nodeType===Node.TEXT_NODE?l+=a.nodeValue:a.nodeType===Node.ELEMENT_NODE&&(a.tagName==="BR"||a.tagName==="P"||a.tagName==="DIV"||a.tagName==="UL"||a.tagNameg=="LI")&&(l+=`
`)}return l=l.replace(/^\n+|\n+$/g,""),l=l.replace(/\n{2,}/g,`
`),l}const U=async()=>{let e=new FormData;if(e.append("title",C),e.append("companyID",S),e.append("serviceId",N),e.append("timeForService",b),e.append("chargeForService",F),e.append("serviceFile",D),e.append("fileType",E),e.append("branchId",P),!d){e.append("isTTSContent",!1);const l=m+"/KioskServiceDetail/save-service-detail";await W(l,e),T(-1);return}let s=V(v);e.append("isTTSContent",!0),e.append("transcript",s),e.append("HTMLTranscript",v),e.append("supportingFile",D);const r=m+"/KioskServiceDetail/save-tts-service-detail";await W(r,e),T(-1)},X=async()=>{const e=m+"/KioskService/get-all-company-department/"+c,s=await f(e);k(s)};n.useEffect(()=>{X()},[c]);const J=async()=>{const e=m+"/Company/get-companies/",s=await f(e);R(s),I(c),M(c)},M=async e=>{const s=m+"/Branch/get-all-branches-for-company/"+e;let r=await f(s);K(r)};n.useEffect(()=>{J()},[]);const y={PaperProps:{style:{maxHeight:48*4.5+8,width:250}}},o=JSON.parse(sessionStorage.getItem("user"));return t.jsxs($,{title:"Create New Service Detail",children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Title"}),t.jsx(p,{id:"outlined-basic",value:C,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return _((s=e==null?void 0:e.target)==null?void 0:s.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Is Text To Speech Content"}),t.jsx(Y,{checked:d,onChange:()=>{B(!d)},inputProps:{"aria-label":"controlled"}})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx("span",{children:"Transcript"})}),t.jsx(q,{style:{height:"150px"},value:v,onChange:H}),t.jsx("br",{}),t.jsx("br",{})]}),d?t.jsx(t.Fragment,{children:t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{style:{marginRight:"1rem"},children:"Chosen Supporting File"}),t.jsx("span",{style:{width:"2rem"},children:"      "}),t.jsx(p,{id:"outlined-basic",inputProps:{accept:".docx,.doc,.pdf"},variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return w((s=e==null?void 0:e.target)==null?void 0:s.files[0])}})]})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Choose File "}),t.jsx(p,{id:"outlined-basic",variant:"outlined",type:"file",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return w((s=e==null?void 0:e.target)==null?void 0:s.files[0])}})]}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(u,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Content"}),t.jsxs(x,{labelId:"demo-select-small-label",id:"demo-select-small",value:E,width:"300px",placeholder:"Choose your Content",MenuProps:y,onChange:e=>{var s;return z((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),t.jsx(i,{value:"image",children:"Image"}),t.jsx(i,{value:"pdf",children:"PDF"}),t.jsx(i,{values:"video",children:"Video"})]})]})})})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Time For Service"}),t.jsx(p,{id:"outlined-basic",value:b,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return L((s=e==null?void 0:e.target)==null?void 0:s.value)}})]}),t.jsxs("div",{style:{marginTop:"0.9rem"},children:[t.jsx("span",{children:"Charge For Service"}),t.jsx(p,{id:"outlined-basic",value:F,variant:"outlined",autoComplete:"off",fullWidth:!0,onChange:e=>{var s;return G((s=e==null?void 0:e.target)==null?void 0:s.value)}})]}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(u,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Company"}),t.jsxs(x,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(S),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s,r;I(Number((s=e==null?void 0:e.target)==null?void 0:s.value)),M((r=e==null?void 0:e.target)==null?void 0:r.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),g==null?void 0:g.map(e=>(o==null?void 0:o.role)==="superadmin"?t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):(e==null?void 0:e.id)===(o==null?void 0:o.companyId)?t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.name},e==null?void 0:e.id):null)]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(u,{sx:{m:0,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Service Branch"}),t.jsxs(x,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(P),width:"300px",placeholder:"Choose your Company",MenuProps:y,onChange:e=>{var s;return A((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),h==null?void 0:h.map(e=>t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.title},e==null?void 0:e.id))]})]})})}),t.jsx("div",{style:{marginTop:"0rem"},children:t.jsx(u,{sx:{m:1,minWidth:120},size:"small",children:t.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:[t.jsx("p",{style:{marginRight:"2rem"},children:"Service Department"}),t.jsxs(x,{labelId:"demo-select-small-label",id:"demo-select-small",value:Number(N),width:"300px",onChange:e=>{var s;O((s=e==null?void 0:e.target)==null?void 0:s.value)},children:[t.jsx(i,{value:"",children:t.jsx("em",{children:"None"})}),j==null?void 0:j.map(e=>t.jsx(i,{value:e==null?void 0:e.id,children:e==null?void 0:e.departmentName},e==null?void 0:e.id))]})]})})}),t.jsx("br",{}),t.jsx("div",{style:{marginTop:"0.9rem"},children:t.jsx(ee,{variant:"contained",onClick:()=>U(),children:"Save Changes"})})]})};export{xe as default};
